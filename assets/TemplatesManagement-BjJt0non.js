import{a as x,r,h as D,i as _,d as u,f as e}from"./index-BZSCxJql.js";import{H as k}from"./SupportDashboard-CxvdUq8n.js";import{t as N,T as C}from"./ValidationSchema-CdbMnuiI.js";import{M as v}from"./Modal-C6dI4g_g.js";import{L as F}from"./LayoutDashboard-CKRNvR8-.js";import{Error401 as P,Error403 as w}from"./Error-5CmM0YFy.js";import"./AiBuilderSupport-DIRpQrrE.js";import"./black-logo-KPU1N9jl.js";import"./Profile-CEge5jb3.js";import"./AuthSupport-CMBJa0HJ.js";function S({type:c,onOpen:m,onClose:s,refreshData:i,pageId:n}){x.defaults.withCredentials=!0;const[o,a]=r.useState({type:"",icon:"",name_class:""}),{toastMessage:p,toastPromise:g}=D(),{token:h}=_();r.useEffect(()=>{m&&c==="create"?a({type:"",icon:"",name_class:""}):m&&c==="update"&&x.get(`${u.pagesAiId}?id=${n}`).then(d=>{a(d.data.data)}).catch(d=>{console.error("Error fetching page data:",d)})},[m,c,n,u]);const y=d=>{const{name:t,value:l}=d.target;a({...o,[t]:l})},j=r.useCallback(d=>{d.preventDefault(),c==="create"?N.validate(o,{abortEarly:!1}).then(()=>{const t=x.post(u.pagesAi,o,{headers:{Authorization:`Bearer ${h}`}});g(t,{pending:"Adding page data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{s(),i()}),t.catch(l=>{console.error("Error adding page data:",l)})}).catch(t=>{t.inner.forEach(l=>{p("error",l.message)})}):N.validate(o,{abortEarly:!1}).then(()=>{const t=x.put(`${u.pagesAi}?id=${n}`,o,{headers:{Authorization:`Bearer ${h}`}});g(t,{pending:"Updating page data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{s(),i()}),t.catch(l=>{console.error("Error updating page data:",l)})}).catch(t=>{t.inner.forEach(l=>{p("error",l.message)})})},[N,o,s,i,p,g,n,h,u]),b=r.useCallback(d=>{d.preventDefault();const t=x.delete(`${u.pagesAi}?id=${n}`,{headers:{Authorization:`Bearer ${h}`}});g(t,{pending:"deleting page data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{s(),i()}),t.catch(l=>{console.error("Error deleting page data:",l)})},[n,h,s,i]);return e.jsx(e.Fragment,{children:c==="delete"?e.jsx(v,{onClose:s,onOpen:m,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:s,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx(v,{titleModal:c==="create"?"Insert Page Data":"Update Page Data",onOpen:m,onClose:s,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"type",children:["Page name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"type",name:"type",placeholder:"Home Page",value:o.type,onChange:y})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"icon",children:["Page icon ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"icon",name:"icon",placeholder:"home (google material icon)",value:o.icon,onChange:y})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name_class",children:["Page class ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name_class",name:"name_class",placeholder:"home-page",value:o.name_class,onChange:y})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function E({isLoadingTempPages:c,pages:m,setPageId:s,setIsUpdateModalOpen:i,setIsDeleteModalOpen:n,type:o}){return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),o==="grid"?e.jsx("div",{className:"temp-pages-grid",children:m.map(a=>e.jsxs("div",{className:"item",children:[e.jsx("span",{className:"material-symbols-rounded item-icon",children:a.icon}),e.jsx("div",{className:"item-name",children:a.type}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{i(!0),s(a.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{n(!0),s(a.type_template_id)},children:"delete"})]})]},a.type_template_id))}):e.jsxs("div",{className:"temp-pages-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Icon"}),e.jsx("div",{className:"head-col",children:"Google Material Icon"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),m.map((a,p)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:p+1}),e.jsx("span",{className:"material-symbols-rounded body-col",children:a.icon}),e.jsx("div",{className:"body-col",children:a.icon}),e.jsx("div",{className:"body-col",children:a.type}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{i(!0),s(a.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{n(!0),s(a.type_template_id)},children:"delete"})]})]},a.type_template_id))]})]})}function $(){x.defaults.withCredentials=!0;const[c,m]=r.useState([]),[s,i]=r.useState(!1),[n,o]=r.useState("grid"),[a,p]=r.useState(!1),[g,h]=r.useState(!1),[y,j]=r.useState(!1),[b,d]=r.useState(null),t=r.useCallback(f=>{o(f)},[]),l=r.useCallback(async()=>{i(!0);try{const f=await x.get(u.pagesAi);m(f.data.data),i(!1)}catch(f){console.error(f),i(!1)}finally{i(!1)}},[u.pagesAi]);return r.useEffect(()=>{l()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-pages",children:[e.jsx(k,{className:"temp-pages",title:"Template Management — Pages",activeDisplay:n,handleDisplayChange:t,setIsCreateModalOpen:p}),n==="grid"?e.jsx(E,{isLoadingTempPages:s,pages:c,setPageId:d,setIsUpdateModalOpen:h,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(E,{isLoadingTempPages:s,pages:c,setPageId:d,setIsUpdateModalOpen:h,setIsDeleteModalOpen:j,type:"list"}),e.jsx(S,{type:"create",onOpen:a,onClose:()=>p(!1),refreshData:l}),e.jsx(S,{type:"update",onOpen:g,onClose:()=>h(!1),refreshData:l,pageId:b}),e.jsx(S,{type:"delete",onOpen:y,onClose:()=>j(!1),refreshData:l,pageId:b})]})})}function A({type:c,onOpen:m,onClose:s,refreshData:i,sectionId:n}){x.defaults.withCredentials=!0;const[o,a]=r.useState({name:""}),{toastMessage:p,toastPromise:g}=D(),{token:h}=_();r.useEffect(()=>{m&&c==="create"?a({name:""}):m&&c==="update"&&x.get(`${u.elementsAiId}?id=${n}`).then(d=>{a(d.data.data[0])}).catch(d=>{console.error("Error fetching section data:",d)})},[m,c,n,u]);const y=d=>{const{name:t,value:l}=d.target;a({...o,[t]:l})},j=r.useCallback(d=>{d.preventDefault(),c==="create"?C.validate(o,{abortEarly:!1}).then(()=>{const t=x.post(u.elementsAi,o,{headers:{Authorization:`Bearer ${h}`}});g(t,{pending:"Adding section data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{s(),i()}),t.catch(l=>{console.error("Error adding section data:",l)})}).catch(t=>{t.inner.forEach(l=>{p("error",l.message)})}):C.validate(o,{abortEarly:!1}).then(()=>{const t=x.put(`${u.elementsAi}?id=${n}`,o,{headers:{Authorization:`Bearer ${h}`}});g(t,{pending:"Updating section data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{s(),i()}),t.catch(l=>{console.error("Error updating section data:",l)})}).catch(t=>{t.inner.forEach(l=>{p("error",l.message)})})},[C,o,s,i,p,g,n,h,u]),b=r.useCallback(d=>{d.preventDefault();const t=x.delete(`${u.elementsAi}?id=${n}`,{headers:{Authorization:`Bearer ${h}`}});g(t,{pending:"deleting section data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{s(),i()}),t.catch(l=>{console.error("Error deleting section data:",l)})},[n,h,s,i]);return e.jsx(e.Fragment,{children:c==="delete"?e.jsx(v,{onClose:s,onOpen:m,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:s,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx(v,{titleModal:c==="create"?"Insert Section Data":"Update Section Data",onOpen:m,onClose:s,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Section name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Intro Section",value:o.name,onChange:y})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function M({isLoadingTempSections:c,sections:m,setSectionId:s,setIsUpdateModalOpen:i,setIsDeleteModalOpen:n,type:o}){return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),o==="grid"?e.jsx("div",{className:"temp-sections-grid",children:m.map(a=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:a.name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{i(!0),s(a.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{n(!0),s(a.section_id)},children:"delete"})]})]},a.section_id))}):e.jsxs("div",{className:"temp-sections-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),m.map((a,p)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:p+1}),e.jsx("div",{className:"body-col",children:a.name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{i(!0),s(a.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{n(!0),s(a.section_id)},children:"delete"})]})]},a.section_id))]})]})}function T(){x.defaults.withCredentials=!0;const[c,m]=r.useState([]),[s,i]=r.useState(!1),[n,o]=r.useState("grid"),[a,p]=r.useState(!1),[g,h]=r.useState(!1),[y,j]=r.useState(!1),[b,d]=r.useState(null),t=r.useCallback(f=>{o(f)},[]),l=r.useCallback(async()=>{i(!0);try{const f=await x.get(u.elementsAi);m(f.data.data),i(!1)}catch(f){console.error(f),i(!1)}finally{i(!1)}},[u.elementsAi]);return r.useEffect(()=>{l()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-sections",children:[e.jsx(k,{className:"temp-sections",title:"Template Management — Sections",activeDisplay:n,handleDisplayChange:t,setIsCreateModalOpen:p}),n==="grid"?e.jsx(M,{isLoadingTempSections:s,sections:c,setSectionId:d,setIsUpdateModalOpen:h,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(M,{isLoadingTempSections:s,sections:c,setSectionId:d,setIsUpdateModalOpen:h,setIsDeleteModalOpen:j,type:"list"}),e.jsx(A,{type:"create",onOpen:a,onClose:()=>p(!1),refreshData:l}),e.jsx(A,{type:"update",onOpen:g,onClose:()=>h(!1),refreshData:l,sectionId:b}),e.jsx(A,{type:"delete",onOpen:y,onClose:()=>j(!1),refreshData:l,sectionId:b})]})})}function q(){return e.jsx(e.Fragment,{children:e.jsx("div",{children:"Colors"})})}function z(){return e.jsx(e.Fragment,{children:e.jsx("div",{children:"Fonts"})})}function K(){const[c,m]=r.useState(!1),{submenuPage:s,accessMenus:i}=D(),{decoded:n,token:o}=_();return r.useEffect(()=>{i.filter(p=>p.role===(n==null?void 0:n.role)&&p.menu_id==="e0c2b209-08c0-4c8b-ae0d-77f86b088879").length>0?m(!0):m(!1)},[i,n]),o?e.jsx(e.Fragment,{children:c?e.jsxs(F,{children:[s==="overview"&&e.jsx("span",{children:"test"}),s==="pages"&&e.jsx($,{}),s==="sections"&&e.jsx(T,{}),s==="colors"&&e.jsx(q,{}),s==="fonts"&&e.jsx(z,{})]}):e.jsx(w,{})}):e.jsx(P,{})}export{K as default};
