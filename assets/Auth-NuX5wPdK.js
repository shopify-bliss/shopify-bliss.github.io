import{j as e,L as h,r,u as P,a as A,b as E,t as p,c as S,d as $,Q as _}from"./index-efJpG4c1.js";import{l as R}from"./black-logo-KPU1N9jl.js";import{u as C,a as k,s as U}from"./ValidationSchema-BzXNAD35.js";import{C as G,j as V,S as D}from"./SmoothScroll-3nL7fy9T.js";const H="/assets/google-CPEPVHln.png",W="/assets/facebook-Cq3j-Ek1.png",z="/assets/whatsapp%20(1)-UD0SVKSJ.png";function B({type:a}){return e.jsxs(e.Fragment,{children:[e.jsxs(h,{to:"/",className:"auth-header-back",children:[e.jsx("span",{className:"material-symbols-outlined",children:"chevron_backward"}),e.jsx("div",{className:"text",children:"Back"})]}),a==="signup"?e.jsx(h,{className:"auth-header-link",to:"/login",children:"Log in"}):e.jsx(h,{className:"auth-header-link",to:"/signup",children:"Create Account"})]})}function I({logo:a,type:i}){return e.jsxs("div",{className:"auth-content-title",children:[e.jsx("img",{className:"logo",src:a,alt:"Shopify Bliss Logo"}),i==="signup"?e.jsx("div",{className:"text",children:"Create Your Account"}):e.jsxs("div",{className:"text",children:["Log into ",e.jsx("span",{children:"shopify bliss"})]})]})}function T({handleForm:a,handleChange:i,values:s,hidePassword:m,setHidePassword:j,validationPassword:l,type:d}){return e.jsxs("form",{className:"form",onSubmit:a,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"text",id:"email",name:"email",autoComplete:"email",placeholder:"example@gmail.com",onChange:i,value:s.email}),e.jsx("div",{className:"input-border"})]}),d==="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",autoComplete:"name",placeholder:"example is me",onChange:i,value:s.username}),e.jsx("div",{className:"input-border"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{type:"number",id:"phone",name:"phone",autoComplete:"tel",placeholder:"81234567890",onChange:i,value:s.phone}),e.jsx("div",{className:"input-border"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:m?"password":"text",id:"password",name:"password",autoComplete:"current-password",placeholder:"password",onChange:i,value:s.password}),e.jsx("span",{className:"material-symbols-outlined",onClick:()=>j(!m),children:m?"visibility_off":"visibility"}),e.jsx("div",{className:"input-border"})]}),d==="signup"&&e.jsxs("div",{className:"validation-password",children:[e.jsxs("div",{className:`item ${l.length?"done":""}`,children:[e.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),e.jsx("div",{className:"item-text",children:"Password should be 8 chars minimum."})]}),e.jsxs("div",{className:`item ${l.lowercase?"done":""}`,children:[e.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),e.jsx("div",{className:"item-text",children:"Password must contain at least one lowercase letter."})]}),e.jsxs("div",{className:`item ${l.uppercase?"done":""}`,children:[e.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),e.jsx("div",{className:"item-text",children:"Password must contain at least one uppercase letter."})]}),e.jsxs("div",{className:`item ${l.number?"done":""}`,children:[e.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),e.jsx("div",{className:"item-text",children:"Password must contain at least one number."})]}),e.jsxs("div",{className:`item ${l.special?"done":""}`,children:[e.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),e.jsx("div",{className:"item-text",children:"Password must contain at least one special character."})]})]}),e.jsx("button",{type:"submit",className:"form-submit",disabled:d==="signup"?!s.email||!s.password||!s.username:!s.email||!s.password,children:d==="signup"?"Sign up":"Log in"})]})}function q({toastDevelop:a}){return e.jsxs("div",{className:"integration",children:[e.jsxs("button",{className:"integration-item",onClick:()=>{a("continue with WhatsApp")},children:[e.jsx("img",{className:"icon",src:z,alt:"WhatsApp's Logo"}),e.jsx("span",{className:"text",children:"Continue with WhatsApp"})]}),e.jsxs(h,{className:"integration-item",to:C.loginGoogle,children:[e.jsx("img",{className:"icon",src:H,alt:"Google's Logo"}),e.jsx("span",{className:"text",children:"Continue with Google"})]}),e.jsxs("button",{className:"integration-item",onClick:()=>{a("continue with Facebook")},children:[e.jsx("img",{className:"icon",src:W,alt:"Facebook's Logo"}),e.jsx("span",{className:"text",children:"Continue with Facebook"})]})]})}function Z({typeMain:a}){k.defaults.withCredentials=!0;const i=new G(null,{path:"/"}),[s,m]=r.useState({email:"",username:"",phone:0,password:""}),[j,l]=r.useState(!0),[d,L]=r.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),f=r.useRef(null),c=P(),u=A(),[w]=E(),N=w.get("message"),b=w.get("shopify-bliss"),g=w.get("role");r.useEffect(()=>{if(N){p("success",N,{position:"top-center"});const o=new URLSearchParams(window.location.search);o.delete("message");const n=o.toString()?`${window.location.pathname}?${o.toString()}`:window.location.pathname;window.history.replaceState({},document.title,n)}},[N]),r.useEffect(()=>{if(b&&g){i.set("shopify-bliss",b);const o=new URLSearchParams(window.location.search);o.delete("shopify-bliss"),o.delete("role");const n=o.toString()?`${window.location.pathname}?${o.toString()}`:window.location.pathname;window.history.replaceState({},document.title,n),g==="admin"?c("/dashboard",{state:{messageLoginGoogle:"Login successfully!"}}):g==="customer"&&c("/profile",{state:{messageLoginGoogle:"Login successfully!"}})}},[b,g,i,c]);const y=r.useCallback(o=>{const{name:n,value:t}=o.target;m(x=>({...x,[n]:t})),n==="password"&&L({length:t.length>=8,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),special:/[@$!%*?&#^()_\-+=]/.test(t)})},[]),F=r.useCallback(o=>{if(o.preventDefault(),a==="signup")U.validate({email:s.email,username:s.username,phone:s.phone,password:s.password},{abortEarly:!1}).then(()=>{const n=k.post(C.signupForm,{email:s.email,username:s.username,password:s.password});S(n,{pending:"Signup in progress, please wait..",success:"Signup successful! ðŸŽ‰",error:"Failed to signup, please try again!"},{autoClose:5e3,position:"top-center"}),n.then(t=>{console.log(t.data),m("")}).catch(t=>{console.error(t),p("error",t,{position:"top-center"})})}).catch(n=>{n.inner.forEach(t=>{p("error",t.message,{position:"top-center",autoClose:3500})})});else{const n=k.post(C.loginForm,{email:s.email,password:s.password});S(n,{pending:"Login in progress, please wait.",success:"Login successful! ðŸŽ‰",error:"Failed to login, please try again!"},{position:"top-center"},()=>{f.current==="admin"?c("/dashboard"):f.current==="customer"&&c("/profile")}),n.then(t=>{const x=t.data.token;i.set("shopify-bliss",x);const v=V(x);v.role==="admin"||v.role==="customer"?f.current=v.role:p("error","Access denied. Role not recognized.")}).catch(t=>{console.error(t)})}},[s,a]);return r.useEffect(()=>{var o;(o=u.state)!=null&&o.messageLogout&&(p("success",u.state.messageLogout),c(u.pathname,{state:{...u.state,messageLogout:void 0},replace:!0}))},[u.state,c,p,u.pathname]),e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs("div",{className:"auth",children:[e.jsx("div",{className:"auth-header",children:e.jsx(B,{type:a})}),e.jsxs("div",{className:"auth-content",children:[e.jsx(I,{logo:R,type:a}),e.jsxs("div",{className:`auth-content-core ${a==="signup"?"signup":""}`,children:[e.jsx(T,{values:s,hidePassword:j,setHidePassword:l,validationPassword:d,handleChange:y,handleForm:F,type:a}),a!=="signup"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divider"}),e.jsx(q,{type:a,toastDevelop:$})]})]}),a==="signup"?"":e.jsx(h,{className:"auth-content-problems",to:"/404",children:"Can't Log In"})]})]}),e.jsx(_,{})]})}export{Z as default};
