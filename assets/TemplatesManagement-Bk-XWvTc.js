import{P as u,a as f,r,h as A,e as y,j as e,i as E,k as T,u as k}from"./index-BP31rb4T.js";import{H as P}from"./SupportDashboard-DuQqvTqs.js";import{t as M,T as _}from"./ValidationSchema-BwsmvZcF.js";import{M as S}from"./Profile-SILfLEsh.js";import{L}from"./LayoutDashboard-B4lPmIzE.js";import"./AuthSupport-C8noIWmd.js";import"./AiBuilderSupport-EiYJyqgq.js";import"./black-logo-KPU1N9jl.js";function N({type:t,onOpen:o,onClose:a,refreshData:l,pageId:d}){f.defaults.withCredentials=!0;const[m,h]=r.useState({type:"",icon:"",name_class:""}),{toastMessage:s,toastPromise:c,token:g}=A();r.useEffect(()=>{o&&t==="create"?h({type:"",icon:"",name_class:""}):o&&t==="update"&&f.get(`${y.pagesAiId}?id=${d}`).then(p=>{h(p.data.data)}).catch(p=>{console.error("Error fetching page data:",p)})},[o,t,d]);const v=p=>{const{name:i,value:n}=p.target;h({...m,[i]:n})},x=r.useCallback(p=>{p.preventDefault(),t==="create"?M.validate(m,{abortEarly:!1}).then(()=>{const i=f.post(y.pagesAi,m,{headers:{Authorization:`Bearer ${g}`}});c(i,{pending:"Adding page data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),l()}),i.catch(n=>{console.error("Error adding page data:",n)})}).catch(i=>{i.inner.forEach(n=>{s("error",n.message)})}):M.validate(m,{abortEarly:!1}).then(()=>{const i=f.put(`${y.pagesAi}?id=${d}`,m,{headers:{Authorization:`Bearer ${g}`}});c(i,{pending:"Updating page data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),l()}),i.catch(n=>{console.error("Error updating page data:",n)})}).catch(i=>{i.inner.forEach(n=>{s("error",n.message)})})},[t,m,a,l,s,c,d,g]),b=r.useCallback(p=>{p.preventDefault();const i=f.delete(`${y.pagesAi}?id=${d}`,{headers:{Authorization:`Bearer ${g}`}});c(i,{pending:"deleting page data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),l()}),i.catch(n=>{console.error("Error deleting page data:",n)})},[d,g,a,l,c]);return e.jsx(e.Fragment,{children:t==="delete"?e.jsx(S,{onClose:a,onOpen:o,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx(S,{titleModal:t==="create"?"Insert Page Data":"Update Page Data",onOpen:o,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:x,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"type",children:["Page name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"type",name:"type",placeholder:"Home Page",value:m.type,onChange:v})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"icon",children:["Page icon ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"icon",name:"icon",placeholder:"home (google material icon)",value:m.icon,onChange:v})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}N.propTypes={type:u.string,onOpen:u.bool,onClose:u.func,refreshData:u.func,pageId:u.string};function w({isLoadingTempPages:t,pages:o,setPageId:a,setIsUpdateModalOpen:l,setIsDeleteModalOpen:d,type:m}){const{search:h}=E();return e.jsxs(e.Fragment,{children:[t&&e.jsx(T,{}),m==="grid"?e.jsx("div",{className:"temp-pages-grid",children:o.filter(s=>{const c=h.toLowerCase();return s.type.toLowerCase().includes(c)||s.icon.toLowerCase().includes(c)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("span",{className:"material-symbols-rounded item-icon",children:s.icon}),e.jsx("div",{className:"item-name",children:s.type}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{l(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{d(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))}):e.jsxs("div",{className:"temp-pages-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Icon"}),e.jsx("div",{className:"head-col",children:"Google Material Icon"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),o.filter(s=>{const c=h.toLowerCase();return s.type.toLowerCase().includes(c)||s.icon.toLowerCase().includes(c)}).map((s,c)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:c+1}),e.jsx("span",{className:"material-symbols-rounded body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.type}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{l(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{d(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))]})]})}function F(){f.defaults.withCredentials=!0;const[t,o]=r.useState([]),[a,l]=r.useState(!1),[d,m]=r.useState("grid"),[h,s]=r.useState(!1),[c,g]=r.useState(!1),[v,x]=r.useState(!1),[b,p]=r.useState(null),i=r.useCallback(j=>{m(j)},[]),n=r.useCallback(async()=>{l(!0);try{const j=await f.get(y.pagesAi);o(j.data.data),l(!1)}catch(j){console.error(j),l(!1)}finally{l(!1)}},[]);return r.useEffect(()=>{n()},[n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-pages",children:[e.jsx(P,{className:"temp-pages",title:"Template Management â€” Pages",activeDisplay:d,handleDisplayChange:i,setIsCreateModalOpen:s}),d==="grid"?e.jsx(w,{isLoadingTempPages:a,pages:t,setPageId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:x,type:"grid"}):e.jsx(w,{isLoadingTempPages:a,pages:t,setPageId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:x,type:"list"}),e.jsx(N,{type:"create",onOpen:h,onClose:()=>s(!1),refreshData:n}),e.jsx(N,{type:"update",onOpen:c,onClose:()=>g(!1),refreshData:n,pageId:b}),e.jsx(N,{type:"delete",onOpen:v,onClose:()=>x(!1),refreshData:n,pageId:b})]})})}w.propTypes={isLoadingTempPages:u.bool,pages:u.array,setPageId:u.func,setIsUpdateModalOpen:u.func,setIsDeleteModalOpen:u.func,type:u.string};function C({type:t,onOpen:o,onClose:a,refreshData:l,sectionId:d}){f.defaults.withCredentials=!0;const[m,h]=r.useState({name:""}),{toastMessage:s,toastPromise:c,token:g}=A();r.useEffect(()=>{o&&t==="create"?h({name:""}):o&&t==="update"&&f.get(`${y.elementsAiId}?id=${d}`).then(p=>{h(p.data.data[0])}).catch(p=>{console.error("Error fetching section data:",p)})},[o,t,d]);const v=p=>{const{name:i,value:n}=p.target;h({...m,[i]:n})},x=r.useCallback(p=>{p.preventDefault(),t==="create"?_.validate(m,{abortEarly:!1}).then(()=>{const i=f.post(y.elementsAi,m,{headers:{Authorization:`Bearer ${g}`}});c(i,{pending:"Adding section data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),l()}),i.catch(n=>{console.error("Error adding section data:",n)})}).catch(i=>{i.inner.forEach(n=>{s("error",n.message)})}):_.validate(m,{abortEarly:!1}).then(()=>{const i=f.put(`${y.elementsAi}?id=${d}`,m,{headers:{Authorization:`Bearer ${g}`}});c(i,{pending:"Updating section data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),l()}),i.catch(n=>{console.error("Error updating section data:",n)})}).catch(i=>{i.inner.forEach(n=>{s("error",n.message)})})},[t,m,a,l,s,c,d,g]),b=r.useCallback(p=>{p.preventDefault();const i=f.delete(`${y.elementsAi}?id=${d}`,{headers:{Authorization:`Bearer ${g}`}});c(i,{pending:"deleting section data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),l()}),i.catch(n=>{console.error("Error deleting section data:",n)})},[d,g,a,l,c]);return e.jsx(e.Fragment,{children:t==="delete"?e.jsx(S,{onClose:a,onOpen:o,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx(S,{titleModal:t==="create"?"Insert Section Data":"Update Section Data",onOpen:o,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:x,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Section name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Intro Section",value:m.name,onChange:v})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}C.propTypes={type:u.string.isRequired,onOpen:u.bool.isRequired,onClose:u.func.isRequired,refreshData:u.func.isRequired,sectionId:u.string};function D({isLoadingTempSections:t,sections:o,setSectionId:a,setIsUpdateModalOpen:l,setIsDeleteModalOpen:d,type:m}){const{search:h}=E();return e.jsxs(e.Fragment,{children:[t&&e.jsx(T,{}),m==="grid"?e.jsx("div",{className:"temp-sections-grid",children:o.filter(s=>{const c=h.toLowerCase();return s.name.toLowerCase().includes(c)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{l(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{d(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))}):e.jsxs("div",{className:"temp-sections-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),o.filter(s=>{const c=h.toLowerCase();return s.name.toLowerCase().includes(c)}).map((s,c)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:c+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{l(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{d(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))]})]})}function $(){f.defaults.withCredentials=!0;const[t,o]=r.useState([]),[a,l]=r.useState(!1),[d,m]=r.useState("grid"),[h,s]=r.useState(!1),[c,g]=r.useState(!1),[v,x]=r.useState(!1),[b,p]=r.useState(null),i=r.useCallback(j=>{m(j)},[]),n=r.useCallback(async()=>{l(!0);try{const j=await f.get(y.elementsAi);o(j.data.data),l(!1)}catch(j){console.error(j),l(!1)}finally{l(!1)}},[]);return r.useEffect(()=>{n()},[n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-sections",children:[e.jsx(P,{className:"temp-sections",title:"Template Management â€” Sections",activeDisplay:d,handleDisplayChange:i,setIsCreateModalOpen:s}),d==="grid"?e.jsx(D,{isLoadingTempSections:a,sections:t,setSectionId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:x,type:"grid"}):e.jsx(D,{isLoadingTempSections:a,sections:t,setSectionId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:x,type:"list"}),e.jsx(C,{type:"create",onOpen:h,onClose:()=>s(!1),refreshData:n}),e.jsx(C,{type:"update",onOpen:c,onClose:()=>g(!1),refreshData:n,sectionId:b}),e.jsx(C,{type:"delete",onOpen:v,onClose:()=>x(!1),refreshData:n,sectionId:b})]})})}D.propTypes={isLoadingTempSections:u.bool,sections:u.array,setSectionId:u.func,setIsUpdateModalOpen:u.func,setIsDeleteModalOpen:u.func,type:u.string};function O(){const[t,o]=r.useState("");return r.useEffect(()=>{o("Colors")},[]),e.jsx(e.Fragment,{children:e.jsx("div",{children:t})})}function q(){const[t,o]=r.useState("");return r.useEffect(()=>{o("Fonts")},[]),e.jsx(e.Fragment,{children:e.jsx("div",{children:t})})}function G(){const{submenuPage:t,accessMenus:o,user:a}=A(),l=k();return r.useEffect(()=>{const d=setTimeout(()=>{(o==null?void 0:o.some(h=>h.role_id===(a==null?void 0:a.role_id)&&h.menu_id==="e0c2b209-08c0-4c8b-ae0d-77f86b088879"))===!1&&l("/403",{replace:!0})},1e4);return()=>clearTimeout(d)},[o,a,l]),e.jsx(e.Fragment,{children:e.jsxs(L,{children:[t==="overview"&&e.jsx("span",{children:"test"}),t==="pages"&&e.jsx(F,{}),t==="sections"&&e.jsx($,{}),t==="colors"&&e.jsx(O,{}),t==="fonts"&&e.jsx(q,{})]})})}export{G as default};
