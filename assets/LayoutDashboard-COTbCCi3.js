import{h,f as e,r as i,N as b,i as g,u as k,L}from"./index-CMOvAOI6.js";import{L as _}from"./AiBuilderSupport-yaeu0xI2.js";import{C}from"./index-4KdN5x27.js";import{P as E}from"./Profile-zX8F_9Rq.js";import{Error401 as M,Error403 as y}from"./Error-CNtiXdZS.js";function P(){const{menus:l,accessMenus:n,user:o}=h();return e.jsx("div",{className:"layout-dashboard-sidebar",children:l.map(s=>{const t=n.filter(c=>c.role_id===(o==null?void 0:o.role_id)&&c.menu_id===s.menu_id&&s.menu_id!=="6556df8f-7cd6-4848-b39f-1e6ab4973311");return e.jsx(i.Fragment,{children:t.map(c=>e.jsxs(b,{to:`/${s.url}`,className:"sidebar-list",children:[e.jsx("div",{className:"sidebar-list-item",children:s.name}),e.jsx("div",{className:"border-effect"})]},c.access_id))},s.menu_id)})})}const S="/assets/pexels-alancabello-1291515-DHvgex6l.jpg";function w(){const[l,n]=i.useState(!1),[o,s]=i.useState(!1),t=i.useRef(null),{submenus:c,activeMenu:u,handleSubmenuPage:f,submenuPage:d,toastDevelop:r,menus:m,user:v}=h(),{token:j}=g(),p=k(),x=i.useCallback(a=>{t.current&&!t.current.contains(a.target)&&n(!1)},[t]);i.useEffect(()=>(l?document.addEventListener("mousedown",x):document.removeEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}),[l]);const N=i.useCallback(()=>{j&&(new C(null,{path:"/"}).remove("shopify-bliss"),p("/login",{state:{messageLogout:"Logout successfully!"}}))},[j]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"layout-dashboard-topbar",children:[e.jsx(_,{}),e.jsx("div",{className:"links",children:c.filter(a=>a.menu_id===u).map(a=>e.jsx("div",{className:`links-item ${a.name===d?"active":""}`,onClick:()=>f(a.name),children:a.name},a.sub_menu_id))}),e.jsxs("div",{className:"config",children:[e.jsx("div",{className:"config-help",onClick:()=>{r("help")},children:"Help"}),e.jsxs("div",{className:"config-account",onClick:()=>n(!0),children:[e.jsx("div",{className:"text",children:"Account Setting"}),e.jsx("img",{src:S,alt:"Profile image's"})]}),l?e.jsxs("div",{className:"account-modal",ref:t,children:[e.jsxs("div",{className:"account-modal-profile",children:[e.jsx("div",{className:"username",children:v.username}),e.jsx("div",{className:"email",children:v.email})]}),m.filter(a=>a.menu_id==="6556df8f-7cd6-4848-b39f-1e6ab4973311").map(a=>e.jsx(L,{className:"account-modal-item",onClick:()=>{s(!0),n(!1)},children:a.name},a.menu_id)),e.jsx("div",{className:"account-modal-item",onClick:()=>{r("notifications")},children:"Notifications"}),e.jsx("div",{className:"account-modal-item",onClick:()=>{r("language")},children:"Language"}),e.jsx("div",{className:"account-modal-item",onClick:N,children:"Logout"})]}):""]})]}),o?e.jsx(E,{onOpen:o,onClose:()=>s(!1)}):""]})}function F({children:l}){const{token:n}=g(),{accessMenus:o,user:s}=h(),[t,c]=i.useState(!1),[u,f]=i.useState(!0),d=i.useRef(!1);return i.useEffect(()=>{if(n&&s&&!d.current){d.current=!0;const r=o.some(m=>m.role_id===(s==null?void 0:s.role_id)&&m.menu_id==="e0c2b209-08c0-4c8b-ae0d-77f86b088879");setTimeout(()=>{c(r),f(!1)},1500)}},[n,s,o]),n?u?e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}):t?e.jsxs("div",{className:"layout-dashboard",children:[e.jsx(P,{}),e.jsx(w,{}),e.jsx("div",{className:"layout-dashboard-content",children:l})]}):e.jsx(y,{}):e.jsx(M,{})}export{F as L};
