import{a as g,r as o,u as N,b as w,i as x,f as e,h as C,d as v}from"./index-CMOvAOI6.js";import{d as _}from"./AuthSupport-BsZ_FME2.js";import{b as S}from"./ValidationSchema-m6anahiY.js";function A(){g.defaults.withCredentials=!0;const[i,l]=o.useState(!0),[d,c]=o.useState(!0),[u,m]=o.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1});N(),w(),x();const r=o.useCallback(a=>{const{name:n,value:t}=a.target;n==="setPassword"&&m({length:t.length>=8,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),special:/[@$!%*?&#^()_\-+=]/.test(t)})},[m]);return e.jsxs("form",{className:"core",children:[e.jsxs("div",{className:"core-input",children:[e.jsxs("div",{className:"core-input-group core-input-pw",children:[e.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),e.jsx("input",{type:`${i?"password":"text"}`,id:"currentPassword",name:"currentPassword",autoComplete:"off"}),e.jsx("span",{className:"material-symbols-outlined",onClick:()=>l(!i),children:i?"visibility_off":"visibility"}),e.jsx("div",{className:"input-border"})]}),e.jsxs("div",{className:"core-input-group core-input-pw",children:[e.jsx("label",{htmlFor:"setPassword",children:"Set New Password"}),e.jsx("input",{type:`${d?"password":"text"}`,id:"setPassword",name:"setPassword",autoComplete:"off",onChange:r}),e.jsx("span",{className:"material-symbols-outlined",onClick:()=>c(!d),children:d?"visibility_off":"visibility"}),e.jsx("div",{className:"input-border"})]}),e.jsx(_,{validationPassword:u})]}),e.jsx("button",{className:"core-button",type:"submit",children:"Save"})]})}const E=[{image:"bear.png"},{image:"bee.png"},{image:"butterfly.png"},{image:"chicken.png"},{image:"elephant.png"},{image:"hedgehog.png"},{image:"hippo.png"},{image:"koala.png"},{image:"ladybug.png"},{image:"lion.png"},{image:"llama.png"},{image:"meerkat.png"},{image:"monkey.png"},{image:"panda.png"},{image:"parrot.png"},{image:"penguin.png"},{image:"polar-bear.png"},{image:"puffer-fish.png"},{image:"sea-lion.png"},{image:"sloth.png"},{image:"snake.png"},{image:"spider.png"},{image:"tiger.png"},{image:"turtle.png"},{image:"weasel.png"}];function $({onClose:i}){g.defaults.withCredentials=!0;const{user:l,toastPromise:d,toastMessage:c}=C(),{token:u}=x(),[m,r]=o.useState(l==null?void 0:l.avatar),[a,n]=o.useState(!1),[t,s]=o.useState({username:"",phoneNumber:""}),b=o.useRef(null),j=o.useCallback(p=>{b.current&&!b.current.contains(p.target)&&n(!1)},[b]);o.useEffect(()=>(a?document.addEventListener("mousedown",j):document.removeEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}),[a]),o.useEffect(()=>{l&&s({username:l.username,phoneNumber:l.phone_number})},[l]);const y=o.useCallback(p=>{const{name:f,value:h}=p.target;s({...t,[f]:h})},[t]),P=o.useCallback(p=>{p.preventDefault();const f={avatar:m,username:t.username,phoneNumber:t.phoneNumber};S.validate(f,{abortEarly:!1}).then(()=>{const h=g.put(v.userId,f,{headers:{Authorization:`Bearer ${u}`}});d(h,{pending:"Updating profile data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:3e3,position:"top-center"},()=>{i()}),console.log(response.data)}).catch(h=>{h.inner.forEach(k=>{c("error",k.message)})})},[m,t,v.userId,u]);return e.jsxs("form",{className:"core",onSubmit:P,children:[e.jsxs("div",{className:"core-avatar",children:[e.jsxs("div",{className:"core-avatar-selected",children:[e.jsx("img",{src:`/avatar/${m}`,alt:"Avatar's User"}),e.jsx("span",{onClick:()=>n(!0),children:"Select Avatar"})]}),a&&e.jsx("div",{className:"core-avatar-list",ref:b,children:E.map((p,f)=>e.jsx("img",{src:`/avatar/${p.image}`,alt:"Avatar List",onClick:()=>r(p.image)},f))})]}),e.jsx("div",{className:"core-role"}),e.jsxs("div",{className:"core-input",children:[e.jsxs("div",{className:"core-input-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",autoComplete:"off",value:t.username,onChange:y}),e.jsx("div",{className:"input-border"})]}),e.jsxs("div",{className:"core-input-group",children:[e.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx("input",{type:"number",id:"phoneNumber",name:"phoneNumber",autoComplete:"off",value:t.phoneNumber,onChange:y}),e.jsx("div",{className:"input-border"})]})]}),e.jsx("button",{className:"core-button",type:"submit",children:"Save"})]})}function D({type:i="form",titleModal:l,descModal:d,children:c,onClose:u=null,onOpen:m=null}){return m?e.jsx(e.Fragment,{children:e.jsx("div",{className:"overlay-modal-dashboard",onClick:u,children:i==="form"?e.jsxs("div",{className:"modal-dashboard",onClick:r=>{r.stopPropagation()},children:[e.jsx("span",{className:"modal-dashboard-title",children:l}),e.jsx("span",{className:"material-symbols-outlined modal-dashboard-close",onClick:u,children:"close"}),c]}):e.jsxs("div",{className:"confirm-dashboard",onClick:r=>{r.stopPropagation()},children:[e.jsx("span",{className:"confirm-dashboard-title",children:l}),e.jsx("span",{className:"confirm-dashboard-desc",children:d}),c]})})}):null}function F(){g.defaults.withCredentials=!0;const[i,l]=o.useState(new Array(6).fill("")),d=o.useRef(null),c=N();w(),x();const u=o.useCallback((r,a)=>{const n=r.target.value.replace(/[^0-9]/g,"");if(n.length<=1){const t=[...i];t[a]=n,l(t),n&&a<5&&document.getElementById(`code-input-${a+1}`).focus()}},[i]),m=r=>{r.preventDefault();const a=r.clipboardData.getData("text").trim();if(/^\d{6}$/.test(a)){const n=a.split("");l(n),document.getElementById("code-input-5").focus()}else toastMessage("error","Invalid code format. Please paste 6 digits.")};return o.useCallback(r=>{r.preventDefault();const a=i.join("");if(a.length===6){const n=g.post(v.otpPassword,{otp:a});toastPromise(n,{pending:"Reset password in progress, please wait..",success:"Reset password verified successfully! ðŸŽ‰",error:"Failed to verify reset password, please try again!"},{position:"top-center"},()=>{d.current===!0&&setIsVerify(!0)}),n.then(t=>{d.current=t.data.success}).catch(t=>{console.error(t)})}else toastMessage("error","Please enter all 6 digits.")},[i,v.otpPassword,c]),e.jsxs("form",{className:"recovery-dashboard",children:[e.jsx("div",{className:"recovery-dashboard-text",children:"Please check your email inbox for a 6-digit verification code we have sent to your email address. Enter the code in the field below to confirm your email and complete the reset password process."}),e.jsx("div",{className:"recovery-dashboard-wrapper",children:i.map((r,a)=>e.jsx("input",{id:`code-input-${a}`,className:"code-number",type:"text",maxLength:"1",value:r,onChange:n=>u(n,a),onKeyDown:n=>{n.key==="Backspace"&&!i[a]&&a>0&&document.getElementById(`code-input-${a-1}`).focus()},onPaste:m,autoComplete:"off"},a))}),e.jsx("button",{className:"recovery-dashboard-button",children:"Submit Code"})]})}function M({onClose:i,onOpen:l}){if(!l)return null;const{submenus:d}=C(),[c,u]=o.useState(d.filter(s=>s.menu_id==="6556df8f-7cd6-4848-b39f-1e6ab4973311"&&s.default===!0)[0].sub_menu_id),[m,r]=o.useState(!1),[a,n]=o.useState(!1);w(),N(),x();const t=o.useCallback(s=>{s==="d86578b0-4497-4d43-bdad-0f50af1011aa"&&!a?r(!0):u(s)},[a]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overlay-modal-menu",onClick:()=>{i(),n(!1)},children:e.jsxs("div",{className:"modal-menu",onClick:s=>{s.stopPropagation()},children:[e.jsxs("div",{className:"modal-menu-nav",children:[e.jsx("div",{className:"modal-menu-nav-title",children:"Menu"}),d.filter(s=>s.menu_id==="6556df8f-7cd6-4848-b39f-1e6ab4973311"&&s.sub_menu_id!=="a14736d9-7bcc-4eef-9be3-2015223cc5ed").map(s=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:`modal-menu-nav-item ${s.sub_menu_id===c?"active":""}`,onClick:()=>t(s.sub_menu_id),children:[e.jsx("div",{className:"name",children:s.name}),e.jsx("div",{className:"border-effect"})]},s.sub_menu_id)})),a&&e.jsx(e.Fragment,{children:d.filter(s=>s.menu_id==="6556df8f-7cd6-4848-b39f-1e6ab4973311"&&s.sub_menu_id==="a14736d9-7bcc-4eef-9be3-2015223cc5ed").map(s=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:`modal-menu-nav-item ${s.sub_menu_id===c?"active":""}`,onClick:()=>t(s.sub_menu_id),children:[e.jsx("div",{className:"name",children:s.name}),e.jsx("div",{className:"border-effect"})]},s.sub_menu_id)}))})]}),e.jsxs("div",{className:"modal-menu-content",children:[e.jsxs("div",{className:"header",children:[e.jsxs("span",{className:"header-title",children:["Profile â€”"," ",c==="0977a7d1-7ee9-4b68-8e3d-edad0ef87a56"?"Bio":c==="d86578b0-4497-4d43-bdad-0f50af1011aa"?"Password":"Verify OTP"]}),e.jsx("span",{className:"header-close material-symbols-outlined",onClick:i,children:"close"})]}),c==="0977a7d1-7ee9-4b68-8e3d-edad0ef87a56"?e.jsx($,{onClose:()=>r(!1)}):c==="d86578b0-4497-4d43-bdad-0f50af1011aa"&&a?e.jsx(A,{}):e.jsx(F,{})]})]})}),e.jsx(D,{type:"confirm",titleModal:"Are you sure you want to reset password?",descModal:"If you sure want to change your password, please check your email for a verification code.",onClose:()=>{r(!1),n(!1)},onOpen:m,children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:()=>{r(!1),n(!1)},children:"cancel"}),e.jsx("div",{className:"confirm",onClick:()=>{r(!1),n(!0),u("a14736d9-7bcc-4eef-9be3-2015223cc5ed")},children:"reset"})]})})]})}const V=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{D as M,M as P,V as a};
