import{b as f,r as a,i as F,k as D,a as x,j as e,L}from"./index-MG9zrmVw.js";import{L as R}from"./LayoutDashboard-F3fApY24.js";import{Error403 as U}from"./Error-D71VhRBw.js";import{M as k,H as z}from"./Modal-Du5GvclA.js";import{M as E,S as A}from"./ValidationSchema-CWTq1zQn.js";import"./AiBuilderSupport-CA6Gx-GP.js";import"./black-logo-KPU1N9jl.js";function $({type:t,onOpen:r,onClose:n,refreshData:l,menuId:i}){f.defaults.withCredentials=!0;const[u,s]=a.useState({name:"",url:""}),{toastMessage:h,toastPromise:g}=F(),{token:p}=D();a.useEffect(()=>{r&&t==="create"?s({name:"",url:""}):r&&t==="update"&&f.get(`${x.menusId}?id=${i}`).then(m=>{s(m.data.data[0])}).catch(m=>{console.error("Error fetching menu data:",m)})},[r,t,i,x]);const M=m=>{const{name:c,value:d}=m.target;s({...u,[c]:d})},j=a.useCallback(m=>{m.preventDefault(),t==="create"?E.validate(u,{abortEarly:!1}).then(()=>{const c=f.post(x.menus,u,{headers:{Authorization:`Bearer ${p}`}});g(c,{pending:"Adding menu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{n(),l()}),c.catch(d=>{console.error("Error adding menu data:",d)})}).catch(c=>{c.inner.forEach(d=>{h("error",d.message)})}):E.validate(u,{abortEarly:!1}).then(()=>{const c=f.put(`${x.menus}?id=${i}`,u,{headers:{Authorization:`Bearer ${p}`}});g(c,{pending:"Updating menu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{n(),l()}),c.catch(d=>{console.error("Error updating menu data:",d)})}).catch(c=>{c.inner.forEach(d=>{h("error",d.message)})})},[E,u,n,l,h,g,i,p,x]),v=a.useCallback(m=>{m.preventDefault();const c=f.delete(`${x.menus}?id=${i}`,{headers:{Authorization:`Bearer ${p}`}});g(c,{pending:"deleting menu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{n(),l()}),c.catch(d=>{console.error("Error deleting menu data:",d)})},[i,p,n,l]);return e.jsx(e.Fragment,{children:t==="delete"?e.jsx(k,{onClose:n,onOpen:r,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:n,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:v,children:"delete"})]})}):e.jsx(k,{titleModal:t==="create"?"Insert Menu Data":"Update Menu Data",onOpen:r,onClose:n,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Menu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:u.name,onChange:M})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"url",children:["Menu url ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"url",name:"url",placeholder:"access-management",value:u.url,onChange:M})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function P({isLoadingMenuMan:t,menus:r,setMenuId:n,setIsUpdateModalOpen:l,setIsDeleteModalOpen:i,type:u}){return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),u==="grid"?e.jsx("div",{className:"menu-man-grid",children:r.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsxs("div",{className:"item-url",children:["Link:"," ",e.jsx(L,{to:`/${s.url}`,className:"item-url-link",children:s.url})]}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{l(!0),n(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{i(!0),n(s.menu_id)},children:"delete"})]})]},s.menu_id))}):e.jsxs("div",{className:"menu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Url"}),e.jsx("div",{className:"head-col",children:"Action"})]}),r.map((s,h)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:h+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx(L,{to:`/${s.url}`,className:"body-col",children:s.url}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{l(!0),n(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{i(!0),n(s.menu_id)},children:"delete"})]})]},s.menu_id))]})]})}function T(){f.defaults.withCredentials=!0;const[t,r]=a.useState([]),[n,l]=a.useState(!1),[i,u]=a.useState("grid"),[s,h]=a.useState(!1),[g,p]=a.useState(!1),[M,j]=a.useState(!1),[v,m]=a.useState(null),c=a.useCallback(b=>{u(b)},[]),d=a.useCallback(async()=>{l(!0);try{const b=await f.get(x.menus);r(b.data.data),l(!1)}catch(b){console.error(b),l(!1)}finally{l(!1)}},[x]);return a.useEffect(()=>{d()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"menu-man",children:[e.jsx(z,{className:"menu-man",title:"Menu Management — Menus",activeDisplay:i,handleDisplayChange:c,setIsCreateModalOpen:h}),i==="grid"?e.jsx(P,{isLoadingMenuMan:n,menus:t,setMenuId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(P,{isLoadingMenuMan:n,menus:t,setMenuId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"list"}),e.jsx($,{type:"create",onOpen:s,onClose:()=>h(!1),refreshData:d}),e.jsx($,{type:"update",onOpen:g,onClose:()=>p(!1),refreshData:d,menuId:v}),e.jsx($,{type:"delete",onOpen:M,onClose:()=>j(!1),refreshData:d,menuId:v})]})})}function w({type:t,onOpen:r,onClose:n,refreshData:l,submenuId:i}){f.defaults.withCredentials=!0;const[u,s]=a.useState(!1),[h,g]=a.useState(""),[p,M]=a.useState(!1),[j,v]=a.useState(""),m=a.useRef(null),{toastMessage:c,toastPromise:d,menu:b}=F(),{token:N}=D(),_=a.useCallback(o=>{m.current&&!m.current.contains(o.target)&&s(!1)},[m]);a.useEffect(()=>(u?document.addEventListener("mousedown",_):document.removeEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}),[u]),a.useEffect(()=>{r&&t==="create"?(v(""),g(""),M(!1)):r&&t==="update"&&f.get(`${x.submenusId}?id=${i}`,{headers:{Authorization:`Bearer ${N}`}}).then(o=>{v(o.data.data.name),g(o.data.data.menu_id),M(o.data.data.default)}).catch(o=>{console.error("Error fetching submenu data:",o)})},[r,t,i,N,x.submenusId]);const B=a.useCallback(o=>{o.preventDefault();const S={menuID:h,name:j,defaults:p};t==="create"?A.validate(S,{abortEarly:!1}).then(()=>{const y=f.post(x.submenus,S,{headers:{Authorization:`Bearer ${N}`}});d(y,{pending:"Adding submenu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{n(),l()}),y.catch(C=>{console.error("Error adding submenu data:",C)})}).catch(y=>{y.inner.forEach(C=>{c("error",C.message)})}):A.validate(S,{abortEarly:!1}).then(()=>{const y=f.put(`${x.submenus}?id=${i}`,S,{headers:{Authorization:`Bearer ${N}`}});d(y,{pending:"Updating submenu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{n(),l()}),y.catch(C=>{console.error("Error updating submenu data:",C)})}).catch(y=>{y.inner.forEach(C=>{c("error",C.message)})})},[A,j,h,p,n,l,c,d,N,i,x.submenus]),O=a.useCallback(o=>{o.preventDefault();const S=f.delete(`${x.submenus}?id=${i}`,{headers:{Authorization:`Bearer ${N}`}});d(S,{pending:"deleting submenu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{n(),l()}),S.catch(y=>{console.error("Error deleting submenu data:",y)})},[N,i,n,l,x.submenus,d]);return e.jsx(e.Fragment,{children:t==="delete"?e.jsx(k,{onClose:n,onOpen:r,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:n,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:O,children:"delete"})]})}):e.jsx(k,{titleModal:t==="create"?"Insert Submenu Data":"Update Submenu Data",onOpen:r,onClose:n,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:B,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu Parent ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>s(!0),children:[e.jsx("div",{className:"text",children:h===""?"Select Menu Parent":b.filter(o=>o.menu_id===h).map(o=>o.name)}),e.jsx("span",{className:`material-symbols-outlined ${u?"default-closed":""}`,children:"south_east"})]}),u&&e.jsx("div",{className:"select-list",ref:m,children:b.filter(o=>o.menu_id!==h).map(o=>e.jsx("div",{className:"select-list-item",onClick:()=>{g(o.menu_id),s(!1)},children:e.jsx("div",{className:"name",children:o.name})},o.menu_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Submenu Name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Analytics XX",value:j,onChange:o=>v(o.target.value)})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Default ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-default",onClick:()=>M(!p),children:[e.jsx("span",{class:"material-symbols-outlined",children:p?"task_alt":"circle"}),e.jsx("div",{className:"text",children:p?"True":"Null"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function q({isLoadingSubmenuMan:t,submenus:r,setSubmenuId:n,setIsUpdateModalOpen:l,setIsDeleteModalOpen:i,type:u}){return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),u==="grid"?e.jsx("div",{className:"submenu-man-grid",children:r.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsxs("div",{className:"item-action",children:[s.default===!0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"item-action-default",children:[e.jsx("span",{className:"material-symbols-outlined item-action-default-icon",children:"settings"}),e.jsx("span",{className:"item-action-default-text",children:"Default"})]})}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{l(!0),n(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{i(!0),n(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))}):e.jsxs("div",{className:"submenu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Default"}),e.jsx("div",{className:"head-col",children:"Action"})]}),r.map((s,h)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:h+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx("div",{className:"body-col",children:s.menus.name}),e.jsx("div",{className:"body-col",children:s.default===!0?e.jsx("span",{className:"default",children:"Default"}):e.jsx("span",{className:"nope",children:"Nope"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{l(!0),n(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{i(!0),n(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))]})]})}function V(){f.defaults.withCredentials=!0;const[t,r]=a.useState([]),[n,l]=a.useState(!1),[i,u]=a.useState("grid"),[s,h]=a.useState(!1),[g,p]=a.useState(!1),[M,j]=a.useState(!1),[v,m]=a.useState(null),{token:c}=D(),d=a.useCallback(N=>{u(N)},[]),b=a.useCallback(async()=>{l(!0);try{const N=await f.get(x.submenus,{headers:{Authorization:`Bearer ${c}`}});r(N.data.data),l(!1)}catch(N){console.error(N),l(!1)}finally{l(!1)}},[c,x.submenus]);return a.useEffect(()=>{b()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"submenu-man",children:[e.jsx(z,{className:"submenu-man",title:"Menu Management — Submenus",activeDisplay:i,handleDisplayChange:d,setIsCreateModalOpen:h}),i==="grid"?e.jsx(q,{isLoadingSubmenuMan:n,submenus:t,setSubmenuId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(q,{isLoadingSubmenuMan:n,submenus:t,setSubmenuId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"list"}),e.jsx(w,{type:"create",onOpen:s,onClose:()=>h(!1),refreshData:b}),e.jsx(w,{type:"update",onOpen:g,onClose:()=>p(!1),refreshData:b,submenuId:v}),e.jsx(w,{type:"delete",onOpen:M,onClose:()=>j(!1),refreshData:b,submenuId:v})]})})}function W(){const{submenuPage:t}=F(),{decoded:r}=D();return e.jsx(e.Fragment,{children:(r==null?void 0:r.role)!=="admin"?e.jsx(U,{}):e.jsxs(R,{children:[t==="access"&&e.jsx("div",{children:"Access Management"}),t==="menu"&&e.jsx(T,{}),t==="submenu"&&e.jsx(V,{})]})})}export{W as default};
