import{a as g,r as t,h as A,i as w,d as v,f as e,L as U}from"./index-CMOvAOI6.js";import{L as J}from"./LayoutDashboard-COTbCCi3.js";import{H as R}from"./SupportDashboard-CyTMUA7L.js";import{M as L,S as P,A as V,R as O}from"./ValidationSchema-m6anahiY.js";import{M as E}from"./Profile-zX8F_9Rq.js";import"./AiBuilderSupport-yaeu0xI2.js";import"./black-logo-KPU1N9jl.js";import"./index-4KdN5x27.js";import"./Error-CNtiXdZS.js";import"./AuthSupport-BsZ_FME2.js";function z({type:l,onOpen:c,onClose:a,refreshData:d,menuId:o}){g.defaults.withCredentials=!0;const[r,s]=t.useState({name:"",url:""}),{toastMessage:u,toastPromise:f}=A(),{token:n}=w();t.useEffect(()=>{c&&l==="create"?s({name:"",url:""}):c&&l==="update"&&g.get(`${v.menusId}?id=${o}`).then(h=>{s(h.data.data[0])}).catch(h=>{console.error("Error fetching menu data:",h)})},[c,l,o,v]);const b=h=>{const{name:i,value:m}=h.target;s({...r,[i]:m})},N=t.useCallback(h=>{h.preventDefault(),l==="create"?L.validate(r,{abortEarly:!1}).then(()=>{const i=g.post(v.menus,r,{headers:{Authorization:`Bearer ${n}`}});f(i,{pending:"Adding menu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),i.catch(m=>{console.error("Error adding menu data:",m)})}).catch(i=>{i.inner.forEach(m=>{u("error",m.message)})}):L.validate(r,{abortEarly:!1}).then(()=>{const i=g.put(`${v.menus}?id=${o}`,r,{headers:{Authorization:`Bearer ${n}`}});f(i,{pending:"Updating menu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),i.catch(m=>{console.error("Error updating menu data:",m)})}).catch(i=>{i.inner.forEach(m=>{u("error",m.message)})})},[L,r,a,d,u,f,o,n,v]),x=t.useCallback(h=>{h.preventDefault();const i=g.delete(`${v.menus}?id=${o}`,{headers:{Authorization:`Bearer ${n}`}});f(i,{pending:"deleting menu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),i.catch(m=>{console.error("Error deleting menu data:",m)})},[o,n,a,d]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:x,children:"delete"})]})}):e.jsx(E,{titleModal:l==="create"?"Insert Menu Data":"Update Menu Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:N,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Menu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:r.name,onChange:b})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"url",children:["Menu url ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"url",name:"url",placeholder:"access-management",value:r.url,onChange:b})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function T({isLoadingMenuMan:l,menus:c,setMenuId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:r}){return e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),r==="grid"?e.jsx("div",{className:"menu-man-grid",children:c.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(U,{to:`/${s.url}`,className:"item-url",children:s.url}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))}):e.jsxs("div",{className:"menu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Url"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((s,u)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:u+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx(U,{to:`/${s.url}`,className:"body-col",children:s.url}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))]})]})}function K(){g.defaults.withCredentials=!0;const[l,c]=t.useState("grid"),[a,d]=t.useState(!1),[o,r]=t.useState(!1),[s,u]=t.useState(!1),[f,n]=t.useState(null),{menus:b,fetchDashboardData:N,isLoading:x}=A(),h=t.useCallback(i=>{c(i)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"menu-man",children:[e.jsx(R,{className:"menu-man",title:"Menu Management — Menus",activeDisplay:l,handleDisplayChange:h,setIsCreateModalOpen:d}),l==="grid"?e.jsx(T,{isLoadingMenuMan:x,menus:b,setMenuId:n,setIsUpdateModalOpen:r,setIsDeleteModalOpen:u,type:"grid"}):e.jsx(T,{isLoadingMenuMan:x,menus:b,setMenuId:n,setIsUpdateModalOpen:r,setIsDeleteModalOpen:u,type:"list"}),e.jsx(z,{type:"create",onOpen:a,onClose:()=>d(!1),refreshData:N}),e.jsx(z,{type:"update",onOpen:o,onClose:()=>r(!1),refreshData:N,menuId:f}),e.jsx(z,{type:"delete",onOpen:s,onClose:()=>u(!1),refreshData:N,menuId:f})]})})}function B({type:l,onOpen:c,onClose:a,refreshData:d,submenuId:o}){g.defaults.withCredentials=!0;const[r,s]=t.useState(!1),[u,f]=t.useState(""),[n,b]=t.useState(!1),[N,x]=t.useState(""),h=t.useRef(null),{toastMessage:i,toastPromise:m,menus:_}=A(),{token:y}=w(),M=t.useCallback(j=>{h.current&&!h.current.contains(j.target)&&s(!1)},[h]);t.useEffect(()=>(r?document.addEventListener("mousedown",M):document.removeEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}),[r]),t.useEffect(()=>{c&&l==="create"?(x(""),f(""),b(!1)):c&&l==="update"&&g.get(`${v.submenusId}?id=${o}`,{headers:{Authorization:`Bearer ${y}`}}).then(j=>{x(j.data.data.name),f(j.data.data.menu_id),b(j.data.data.default)}).catch(j=>{console.error("Error fetching submenu data:",j)})},[c,l,o,y,v.submenusId]);const k=t.useCallback(j=>{j.preventDefault();const D={menuID:u,name:N,defaults:n};l==="create"?P.validate(D,{abortEarly:!1}).then(()=>{const p=g.post(v.submenus,D,{headers:{Authorization:`Bearer ${y}`}});m(p,{pending:"Adding submenu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),p.catch(C=>{console.error("Error adding submenu data:",C)})}).catch(p=>{p.inner.forEach(C=>{i("error",C.message)})}):P.validate(D,{abortEarly:!1}).then(()=>{const p=g.put(`${v.submenus}?id=${o}`,D,{headers:{Authorization:`Bearer ${y}`}});m(p,{pending:"Updating submenu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),p.catch(C=>{console.error("Error updating submenu data:",C)})}).catch(p=>{p.inner.forEach(C=>{i("error",C.message)})})},[P,N,u,n,a,d,i,m,y,o,v.submenus]),S=t.useCallback(j=>{j.preventDefault();const D=g.delete(`${v.submenus}?id=${o}`,{headers:{Authorization:`Bearer ${y}`}});m(D,{pending:"deleting submenu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),D.catch(p=>{console.error("Error deleting submenu data:",p)})},[y,o,a,d,v.submenus,m]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:S,children:"delete"})]})}):e.jsx(E,{titleModal:l==="create"?"Insert Submenu Data":"Update Submenu Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:k,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu Parent ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>s(!0),children:[e.jsx("div",{className:"text",children:u===""?"Select Menu Parent":_.filter(j=>j.menu_id===u).map(j=>j.name)}),e.jsx("span",{className:`material-symbols-outlined ${r?"default-closed":""}`,children:"south_east"})]}),r&&e.jsx("div",{className:"select-list",ref:h,children:_.filter(j=>j.menu_id!==u).map(j=>e.jsx("div",{className:"select-list-item",onClick:()=>{f(j.menu_id),s(!1)},children:e.jsx("div",{className:"name",children:j.name})},j.menu_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Submenu Name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Analytics XX",value:N,onChange:j=>x(j.target.value)})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Default ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-default",onClick:()=>b(!n),children:[e.jsx("span",{class:"material-symbols-outlined",children:n?"task_alt":"circle"}),e.jsx("div",{className:"text",children:n?"True":"Null"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function Y({isLoadingSubmenuMan:l,submenus:c,setSubmenuId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:r}){return e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),r==="grid"?e.jsx("div",{className:"submenu-man-grid",children:c.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(U,{className:"item-menu",to:`/${s.menus.url}`,children:s.menus.url}),e.jsxs("div",{className:"item-action",children:[s.default===!0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"item-action-default",children:[e.jsx("span",{className:"material-symbols-outlined item-action-default-icon",children:"settings"}),e.jsx("span",{className:"item-action-default-text",children:"Default"})]})}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))}):e.jsxs("div",{className:"submenu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Default"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((s,u)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:u+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx("div",{className:"body-col",children:s.menus.name}),e.jsx("div",{className:"body-col",children:s.default===!0?e.jsx("span",{className:"default",children:"Default"}):e.jsx("span",{className:"nope",children:"-"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))]})]})}function Q(){g.defaults.withCredentials=!0;const[l,c]=t.useState("grid"),[a,d]=t.useState(!1),[o,r]=t.useState(!1),[s,u]=t.useState(!1),[f,n]=t.useState(null),{submenus:b,fetchDashboardData:N,isLoading:x}=A(),h=t.useCallback(i=>{c(i)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"submenu-man",children:[e.jsx(R,{className:"submenu-man",title:"Menu Management — Submenus",activeDisplay:l,handleDisplayChange:h,setIsCreateModalOpen:d}),l==="grid"?e.jsx(Y,{isLoadingSubmenuMan:x,submenus:b,setSubmenuId:n,setIsUpdateModalOpen:r,setIsDeleteModalOpen:u,type:"grid"}):e.jsx(Y,{isLoadingSubmenuMan:x,submenus:b,setSubmenuId:n,setIsUpdateModalOpen:r,setIsDeleteModalOpen:u,type:"list"}),e.jsx(B,{type:"create",onOpen:a,onClose:()=>d(!1),refreshData:N}),e.jsx(B,{type:"update",onOpen:o,onClose:()=>r(!1),refreshData:N,submenuId:f}),e.jsx(B,{type:"delete",onOpen:s,onClose:()=>u(!1),refreshData:N,submenuId:f})]})})}function H({type:l,onOpen:c,onClose:a,refreshData:d,accessId:o,roles:r}){g.defaults.withCredentials=!0;const[s,u]=t.useState(!1),[f,n]=t.useState(!1),[b,N]=t.useState(""),[x,h]=t.useState(""),i=t.useRef(null),m=t.useRef(null),{toastMessage:_,toastPromise:y,menus:M}=A(),{token:k}=w(),S=t.useCallback(p=>{i.current&&!i.current.contains(p.target)?u(!1):m.current&&!m.current.contains(p.target)&&n(!1)},[i,m]);t.useEffect(()=>(s||f?document.addEventListener("mousedown",S):document.removeEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}),[s,f,S]),t.useEffect(()=>{c&&l==="create"&&(h(""),N(""))},[c,l]);const j=t.useCallback(p=>{p.preventDefault();const C={menuID:b,roleID:x};console.log(C),V.validate(C,{abortEarly:!1}).then(()=>{const $=g.post(v.accessManagement,C,{headers:{Authorization:`Bearer ${k}`}});y($,{pending:"Adding access data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),$.catch(F=>{console.error("Error adding access data:",F)})}).catch($=>{$.inner.forEach(F=>{_("error",F.message)})})},[V,x,b,a,d,k,o,_,y,v.accessManagement]),D=t.useCallback(p=>{p.preventDefault();const C=g.delete(`${v.accessManagement}?id=${o}`,{headers:{Authorization:`Bearer ${k}`}});y(C,{pending:"deleting access data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),C.catch($=>{console.error("Error deleting access data:",$)})},[k,y,o,a,d,v.accessManagement]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:D,children:"delete"})]})}):e.jsx(E,{titleModal:"Insert Access Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Role ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>n(!0),children:[e.jsx("div",{className:"text",children:x===""?"Choose Role":r.filter(p=>p.role_id===x).map(p=>p.role_name)}),e.jsx("span",{className:`material-symbols-outlined ${f?"default-closed":""}`,children:"south_east"})]}),f&&e.jsx("div",{className:"select-list no-more",ref:m,children:r.filter(p=>p.role_id!==x).map(p=>e.jsx("div",{className:"select-list-item",onClick:()=>{h(p.role_id),n(!1)},children:e.jsx("div",{className:"name",children:p.role_name})},p.role_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>u(!0),children:[e.jsx("div",{className:"text",children:b===""?"Choose Menu":M.filter(p=>p.menu_id===b).map(p=>p.name)}),e.jsx("span",{className:`material-symbols-outlined ${s?"default-closed":""}`,children:"south_east"})]}),s&&e.jsx("div",{className:"select-list",ref:i,children:M.filter(p=>p.menu_id!==b).map(p=>e.jsx("div",{className:"select-list-item",onClick:()=>{N(p.menu_id),u(!1)},children:e.jsx("div",{className:"name",children:p.name})},p.menu_id))})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function X({isLoadingAccessMan:l,accessMenus:c,setAccessId:a,setIsDeleteModalOpen:d,type:o,menus:r,activeRole:s,handleActiveRole:u,roles:f}){return e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),e.jsxs("div",{className:"access-man-wrapper",children:[e.jsx("div",{className:"access-man-roles",children:f.map(n=>e.jsx("div",{className:`role ${s===n.role_id?"active":""}`,onClick:()=>u(n.role_id),children:n.role_name},n.role_id))}),o==="grid"?e.jsx("div",{className:"access-man-grid",children:r.map(n=>{const b=c.find(x=>x.menu_id===n.menu_id&&x.role_id===s),N=!!b;return e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:n.name}),e.jsx("span",{className:"material-symbols-outlined item-check",children:N?"task_alt":"circle"}),e.jsx("div",{className:"item-action",children:N&&e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{d(!0),a(b.access_id)},children:"delete"})})]},n.menu_id)})}):e.jsxs("div",{className:"access-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Access"}),e.jsx("div",{className:"head-col",children:"Action"})]}),r.map((n,b)=>{const N=c.find(h=>h.menu_id===n.menu_id&&h.role_id===s),x=!!N;return e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:b+1}),e.jsx("div",{className:"body-col",children:n.name}),e.jsx("div",{className:"body-col material-symbols-outlined",children:x?"task_alt":"circle"}),e.jsx("div",{className:"body-col",children:x&&e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{d(!0),a(N.access_id)},children:"delete"})})]},n.menu_id)})]})]})]})}function W(){g.defaults.withCredentials=!0;const[l,c]=t.useState(!0),[a,d]=t.useState("list"),[o,r]=t.useState(!1),[s,u]=t.useState(!1),[f,n]=t.useState(null),[b,N]=t.useState("3de65f44-6341-4b4d-8d9f-c8ca3ea80b80"),[x,h]=t.useState([]),{token:i}=w(),{accessMenus:m,fetchDashboardData:_,menus:y}=A(),M=t.useCallback(j=>{d(j)},[]),k=t.useCallback(j=>{N(j)},[]),S=t.useCallback(async()=>{c(!0);try{const D=(await g.get(v.role,{headers:{Authorization:`Bearer ${i}`}})).data.data;h(D),c(!1)}catch(j){console.error(j),c(!1)}finally{c(!1)}},[i,v.role]);return t.useEffect(()=>{_(),S()},[S,_]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"access-man",children:[e.jsx(R,{className:"access-man",title:"Menu Management — Access Menu",activeDisplay:a,handleDisplayChange:M,setIsCreateModalOpen:r}),a==="grid"?e.jsx(X,{roles:x,isLoadingAccessMan:l,accessMenus:m,setAccessId:n,setIsDeleteModalOpen:u,type:"grid",menus:y,activeRole:b,handleActiveRole:k}):e.jsx(X,{roles:x,isLoadingAccessMan:l,accessMenus:m,setAccessId:n,setIsDeleteModalOpen:u,type:"list",menus:y,activeRole:b,handleActiveRole:k}),e.jsx(H,{type:"create",onOpen:o,onClose:()=>r(!1),refreshData:_,roles:x}),e.jsx(H,{type:"delete",onOpen:s,onClose:()=>u(!1),refreshData:_,accessId:f,roles:x})]})})}function q({type:l,onOpen:c,onClose:a,refreshData:d,roleId:o}){g.defaults.withCredentials=!0;const[r,s]=t.useState({roleName:""}),{toastMessage:u,toastPromise:f}=A(),{token:n}=w();t.useEffect(()=>{c&&l==="create"?s({roleName:""}):c&&l==="update"&&g.get(`${v.roleId}?id=${o}`,{headers:{Authorization:`Bearer ${n}`}}).then(h=>{console.log(h.data.data),s({roleName:h.data.data.role_name})}).catch(h=>{console.error("Error fetching role data:",h)})},[c,l,o,n,v]);const b=h=>{const{name:i,value:m}=h.target;s({...r,[i]:m})},N=t.useCallback(h=>{h.preventDefault(),l==="create"?O.validate(r,{abortEarly:!1}).then(()=>{const i=g.post(v.role,r,{headers:{Authorization:`Bearer ${n}`}});f(i,{pending:"Adding role data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),i.catch(m=>{console.error("Error adding role data:",m)})}).catch(i=>{i.inner.forEach(m=>{u("error",m.message)})}):O.validate(r,{abortEarly:!1}).then(()=>{const i=g.put(`${v.role}?id=${o}`,r,{headers:{Authorization:`Bearer ${n}`}});f(i,{pending:"Updating role data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),i.catch(m=>{console.error("Error updating role data:",m)})}).catch(i=>{i.inner.forEach(m=>{u("error",m.message)})})},[O,r,n,a,d,u,f,o,v]),x=t.useCallback(h=>{h.preventDefault();const i=g.delete(`${v.role}?id=${o}`,{headers:{Authorization:`Bearer ${n}`}});f(i,{pending:"deleting role data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),i.catch(m=>{console.error("Error deleting role data:",m)})},[o,n,a,d,f,v]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:x,children:"delete"})]})}):e.jsx(E,{titleModal:l==="create"?"Insert Role Data":"Update Role Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:N,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"roleName",children:["Role name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"roleName",name:"roleName",placeholder:"Admin",value:r.roleName,onChange:b})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function G({isLoadingRoleMan:l,roles:c,setRoleId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:r}){return e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),r==="grid"?e.jsx("div",{className:"role-man-grid",children:c.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.role_name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.role_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.role_id)},children:"delete"})]})]},s.role_id))}):e.jsxs("div",{className:"role-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((s,u)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:u+1}),e.jsx("div",{className:"body-col",children:s.role_name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.role_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.role_id)},children:"delete"})]})]},s.role_id))]})]})}function Z(){g.defaults.withCredentials=!0;const[l,c]=t.useState([]),[a,d]=t.useState(!0),[o,r]=t.useState("grid"),[s,u]=t.useState(!1),[f,n]=t.useState(!1),[b,N]=t.useState(!1),[x,h]=t.useState(null),{token:i}=w(),{fetchDashboardData:m}=A(),_=t.useCallback(M=>{r(M)},[]),y=t.useCallback(async()=>{d(!0);try{const M=await g.get(v.role,{headers:{Authorization:`Bearer ${i}`}});c(M.data.data)}catch(M){console.error("Error fetching roles:",M)}finally{d(!1)}},[i,v]);return t.useEffect(()=>{y()},[y]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"role-man",children:[e.jsx(R,{className:"role-man",title:"Role Management — Roles",activeDisplay:o,handleDisplayChange:_,setIsCreateModalOpen:u}),o==="grid"?e.jsx(G,{isLoadingRoleMan:a,roles:l,setRoleId:h,setIsUpdateModalOpen:n,setIsDeleteModalOpen:N,type:"grid"}):e.jsx(G,{isLoadingRoleMan:a,roles:l,setRoleId:h,setIsUpdateModalOpen:n,setIsDeleteModalOpen:N,type:"list"}),e.jsx(q,{type:"create",onOpen:s,onClose:()=>u(!1),refreshData:m}),e.jsx(q,{type:"update",onOpen:f,onClose:()=>n(!1),refreshData:m,roleId:x}),e.jsx(q,{type:"delete",onOpen:b,onClose:()=>N(!1),refreshData:m,roleId:x})]})})}function de(){const{submenuPage:l}=A();return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[l==="access"&&e.jsx(W,{}),l==="menu"&&e.jsx(K,{}),l==="submenu"&&e.jsx(Q,{}),l==="role"&&e.jsx(Z,{})]})})}export{de as default};
