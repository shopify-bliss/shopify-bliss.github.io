import{b as x,r as l,i as A,k as M,a as p,j as e,L as E}from"./index-Cj64leMr.js";import{L as F}from"./LayoutDashboard-CMj4TGdq.js";import{Error403 as L}from"./Error-nhEFgRCn.js";import{M as y,H as w}from"./Modal-CkfEJLJ8.js";import{M as S,S as C}from"./ValidationSchema-vCEiEGay.js";import"./AiBuilderSupport-Bi3f_xYw.js";import"./black-logo-KPU1N9jl.js";function D({type:r,onOpen:c,onClose:n,refreshData:i,menuId:o}){x.defaults.withCredentials=!0;const[u,a]=l.useState({name:"",url:""}),{toastMessage:h,toastPromise:j}=A(),{token:m}=M();l.useEffect(()=>{c&&r==="create"?a({name:"",url:""}):c&&r==="update"&&x.get(`${p.menusId}?id=${o}`).then(d=>{a(d.data.data[0])}).catch(d=>{console.error("Error fetching menu data:",d)})},[c,r,o,p]);const N=d=>{const{name:s,value:t}=d.target;a({...u,[s]:t})},b=l.useCallback(d=>{d.preventDefault(),r==="create"?S.validate(u,{abortEarly:!1}).then(()=>{const s=x.post(p.menus,u,{headers:{Authorization:`Bearer ${m}`}});j(s,{pending:"Adding menu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{n(),i()}),s.catch(t=>{console.error("Error adding menu data:",t)})}).catch(s=>{s.inner.forEach(t=>{h("error",t.message)})}):S.validate(u,{abortEarly:!1}).then(()=>{const s=x.put(`${p.menus}?id=${o}`,u,{headers:{Authorization:`Bearer ${m}`}});j(s,{pending:"Updating menu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{n(),i()}),s.catch(t=>{console.error("Error updating menu data:",t)})}).catch(s=>{s.inner.forEach(t=>{h("error",t.message)})})},[S,u,n,i,h,j,o,m,p]),g=l.useCallback(d=>{d.preventDefault();const s=x.delete(`${p.menus}?id=${o}`,{headers:{Authorization:`Bearer ${m}`}});j(s,{pending:"deleting menu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{n(),i()}),s.catch(t=>{console.error("Error deleting menu data:",t)})},[o,m,n,i]);return e.jsx(e.Fragment,{children:r==="delete"?e.jsx(y,{onClose:n,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:n,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:g,children:"delete"})]})}):e.jsx(y,{titleModal:r==="create"?"Insert Menu Data":"Update Menu Data",onOpen:c,onClose:n,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:b,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Menu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:u.name,onChange:N})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"url",children:["Menu url ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"url",name:"url",placeholder:"access-management",value:u.url,onChange:N})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function $({isLoadingMenuMan:r,menus:c,setMenuId:n,setIsUpdateModalOpen:i,setIsDeleteModalOpen:o,type:u}){return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),u==="grid"?e.jsx("div",{className:"menu-man-grid",children:c.map(a=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:a.name}),e.jsxs("div",{className:"item-url",children:["Link:"," ",e.jsx(E,{to:`/${a.url}`,className:"item-url-link",children:a.url})]}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{i(!0),n(a.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),n(a.menu_id)},children:"delete"})]})]},a.menu_id))}):e.jsxs("div",{className:"menu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Url"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((a,h)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:h+1}),e.jsx("div",{className:"body-col",children:a.name}),e.jsx(E,{to:`/${a.url}`,className:"body-col",children:a.url}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{i(!0),n(a.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),n(a.menu_id)},children:"delete"})]})]},a.menu_id))]})]})}function P(){x.defaults.withCredentials=!0;const[r,c]=l.useState([]),[n,i]=l.useState(!1),[o,u]=l.useState("grid"),[a,h]=l.useState(!1),[j,m]=l.useState(!1),[N,b]=l.useState(!1),[g,d]=l.useState(null),s=l.useCallback(f=>{u(f)},[]),t=l.useCallback(async()=>{i(!0);try{const f=await x.get(p.menus);c(f.data.data),i(!1)}catch(f){console.error(f),i(!1)}finally{i(!1)}},[p]);return l.useEffect(()=>{t()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"menu-man",children:[e.jsx(w,{className:"menu-man",title:"Menu Management — Menus",activeDisplay:o,handleDisplayChange:s,setIsCreateModalOpen:h}),o==="grid"?e.jsx($,{isLoadingMenuMan:n,menus:r,setMenuId:d,setIsUpdateModalOpen:m,setIsDeleteModalOpen:b,type:"grid"}):e.jsx($,{isLoadingMenuMan:n,menus:r,setMenuId:d,setIsUpdateModalOpen:m,setIsDeleteModalOpen:b,type:"list"}),e.jsx(D,{type:"create",onOpen:a,onClose:()=>h(!1),refreshData:t}),e.jsx(D,{type:"update",onOpen:j,onClose:()=>m(!1),refreshData:t,menuId:g}),e.jsx(D,{type:"delete",onOpen:N,onClose:()=>b(!1),refreshData:t,menuId:g})]})})}function k({type:r,onOpen:c,onClose:n,refreshData:i,submenuId:o}){x.defaults.withCredentials=!0;const[u,a]=l.useState({menuID:"",name:"",default:!1}),{toastMessage:h,toastPromise:j}=A(),{token:m}=M();l.useEffect(()=>{c&&r==="create"?a({menuID:"",name:"",default:!1}):c&&r==="update"&&x.get(`${p.submenusId}?id=${o}`,{headers:{Authorization:`Bearer ${m}`}}).then(d=>{console.log(d.data.data[0]),a(d.data.data[0])}).catch(d=>{console.error("Error fetching submenu data:",d)})},[c,r,o,m,p]);const N=d=>{const{name:s,value:t}=d.target;a({...u,[s]:t})},b=l.useCallback(d=>{d.preventDefault(),r==="create"?C.validate(u,{abortEarly:!1}).then(()=>{const s=x.post(p.submenus,u,{headers:{Authorization:`Bearer ${m}`}});j(s,{pending:"Adding submenu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{n(),i()}),s.catch(t=>{console.error("Error adding submenu data:",t)})}).catch(s=>{s.inner.forEach(t=>{h("error",t.message)})}):C.validate(u,{abortEarly:!1}).then(()=>{const s=x.put(`${p.submenus}?id=${o}`,u,{headers:{Authorization:`Bearer ${m}`}});j(s,{pending:"Updating submenu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{n(),i()}),s.catch(t=>{console.error("Error updating submenu data:",t)})}).catch(s=>{s.inner.forEach(t=>{h("error",t.message)})})},[C,u,n,i,h,j,o,m,p]),g=l.useCallback(d=>{d.preventDefault();const s=x.delete(`${p.submenus}?id=${o}`,{headers:{Authorization:`Bearer ${m}`}});j(s,{pending:"deleting submenu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{n(),i()}),s.catch(t=>{console.error("Error deleting submenu data:",t)})},[o,m,n,i]);return e.jsx(e.Fragment,{children:r==="delete"?e.jsx(y,{onClose:n,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:n,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:g,children:"delete"})]})}):e.jsx(y,{titleModal:r==="create"?"Insert Submenu Data":"Update Submenu Data",onOpen:c,onClose:n,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:b,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Submenu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:u.name,onChange:N})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function _({isLoadingSubmenuMan:r,submenus:c,setSubmenuId:n,setIsUpdateModalOpen:i,setIsDeleteModalOpen:o,type:u}){return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),u==="grid"?e.jsx("div",{className:"submenu-man-grid",children:c.map(a=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:a.name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{i(!0),n(a.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),n(a.sub_menu_id)},children:"delete"})]})]},a.sub_menu_id))}):e.jsxs("div",{className:"submenu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Default"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((a,h)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:h+1}),e.jsx("div",{className:"body-col",children:a.name}),e.jsx("div",{className:"body-col",children:a.menus.name}),e.jsx("div",{className:"body-col",children:a.default===!0?e.jsx("span",{children:"Default"}):e.jsx("span",{children:"null"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{i(!0),n(a.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),n(a.sub_menu_id)},children:"delete"})]})]},a.sub_menu_id))]})]})}function z(){x.defaults.withCredentials=!0;const[r,c]=l.useState([]),[n,i]=l.useState(!1),[o,u]=l.useState("grid"),[a,h]=l.useState(!1),[j,m]=l.useState(!1),[N,b]=l.useState(!1),[g,d]=l.useState(null),{token:s}=M(),t=l.useCallback(v=>{u(v)},[]),f=l.useCallback(async()=>{i(!0);try{const v=await x.get(p.submenus,{headers:{Authorization:`Bearer ${s}`}});console.log(v.data.data),c(v.data.data),i(!1)}catch(v){console.error(v),i(!1)}finally{i(!1)}},[p,s]);return l.useEffect(()=>{f()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"submenu-man",children:[e.jsx(w,{className:"submenu-man",title:"Menu Management — Submenus",activeDisplay:o,handleDisplayChange:t,setIsCreateModalOpen:h}),o==="grid"?e.jsx(_,{isLoadingSubmenuMan:n,submenus:r,setSubmenuId:d,setIsUpdateModalOpen:m,setIsDeleteModalOpen:b,type:"grid"}):e.jsx(_,{isLoadingSubmenuMan:n,submenus:r,setSubmenuId:d,setIsUpdateModalOpen:m,setIsDeleteModalOpen:b,type:"list"}),e.jsx(k,{type:"create",onOpen:a,onClose:()=>h(!1),refreshData:f}),e.jsx(k,{type:"update",onOpen:j,onClose:()=>m(!1),refreshData:f,submenuId:g}),e.jsx(k,{type:"delete",onOpen:N,onClose:()=>b(!1),refreshData:f,submenuId:g})]})})}function V(){const{submenuPage:r}=A(),{decoded:c}=M();return e.jsx(e.Fragment,{children:(c==null?void 0:c.role)!=="admin"?e.jsx(L,{}):e.jsxs(F,{children:[r==="access"&&e.jsx("div",{children:"Access Management"}),r==="menu"&&e.jsx(P,{}),r==="submenu"&&e.jsx(z,{})]})})}export{V as default};
