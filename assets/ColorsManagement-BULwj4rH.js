import{P as x,a as g,r as o,h as S,e as y,j as e,i as M,k as $,u as L}from"./index-C4l_2Wgo.js";import{L as A}from"./LayoutDashboard-D0vI5o4g.js";import{H as P}from"./SupportDashboard-7tXCLYOm.js";import{C as _}from"./ValidationSchema-Obo53iI1.js";import{M as E}from"./Profile-C_Gx60rA.js";import"./AiBuilderSupport-CVzcLkRa.js";import"./black-logo-KPU1N9jl.js";import"./AuthSupport-D9y-AtW2.js";function D({type:c,onOpen:t,onClose:a,refreshData:n,colorId:i}){g.defaults.withCredentials=!0;const[m,h]=o.useState(""),[s,u]=o.useState(!0),{toastMessage:b,toastPromise:j,token:f}=S(),v=o.useRef(!1),N=o.useRef(!1);o.useEffect(()=>{t&&c==="create"?(h(""),u(!0)):t&&c==="update"&&g.get(`${y.colorId}?id=${i}`,{headers:{Authorization:`Bearer ${f}`}}).then(r=>{h(r.data.data.color),u(r.data.data.is_develope)}).catch(r=>{console.error("Error fetching color data:",r)})},[t,c,i,f]);const C=o.useCallback(r=>{if(r.preventDefault(),c==="create"){const l={color:m,isDevelope:s};_.validate(l,{abortEarly:!1}).then(()=>{const d=g.post(y.colors,l,{headers:{Authorization:`Bearer ${f}`}});d.then(p=>{v.current=p.data.success}),j(d,{pending:"Adding color data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{v.current===!0&&(a(),n())}),d.catch(p=>{console.error("Error adding color data:",p)})}).catch(d=>{d.inner.forEach(p=>{b("error",p.message)})})}else{const l={color:m,isDevelope:s};console.log(l),_.validate(l,{abortEarly:!1}).then(()=>{const d=g.put(`${y.colors}?id=${i}`,l,{headers:{Authorization:`Bearer ${f}`}});d.then(p=>{N.current=p.data.success}),j(d,{pending:"Updating color data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{N.current===!0&&(a(),n())}),d.catch(p=>{console.error("Error updating color data:",p)})}).catch(d=>{d.inner.forEach(p=>{b("error",p.message)})})}},[m,s,a,n,b,j,i,f,c]),k=o.useCallback(r=>{r.preventDefault();const l=g.delete(`${y.colors}?id=${i}`,{headers:{Authorization:`Bearer ${f}`}});j(l,{pending:"deleting color data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),n()}),l.catch(d=>{console.error("Error deleting color data:",d)})},[i,f,a,n,j]);return e.jsx(e.Fragment,{children:c==="delete"?e.jsx(E,{onClose:a,onOpen:t,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:k,children:"delete"})]})}):e.jsx(E,{titleModal:c==="create"?"Insert Font Data":"Update Font Data",onOpen:t,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:C,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"color",children:["Color ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"color",name:"color",placeholder:"f0f0f0",value:m,onChange:r=>h(r.target.value)})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Is Develope ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-option",onClick:()=>u(!s),children:[e.jsx("span",{className:"material-symbols-outlined",children:s?"circle":"task_alt"}),e.jsx("div",{className:"text",children:s?"Progress":"Done"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}D.propTypes={type:x.string,onOpen:x.bool,onClose:x.func,refreshData:x.func,colorId:x.string};function w({isLoadingDashboard:c,colors:t,setColorId:a,setIsUpdateModalOpen:n,setIsDeleteModalOpen:i,type:m}){const{search:h}=M();return e.jsxs(e.Fragment,{children:[c&&e.jsx($,{}),m==="grid"?e.jsx("div",{className:"colors-man-grid",children:t.filter(s=>{const u=h.toLowerCase();return s.color.toLowerCase().includes(u)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-samples",style:{backgroundColor:`#${s.color}`}}),e.jsx("div",{className:"item-hex",children:s.color}),e.jsxs("div",{className:"item-action",children:[s.is_develope===!0?e.jsxs("span",{className:"item-action-progress",children:[e.jsx("span",{className:"material-symbols-outlined item-action-icon",children:"sync"}),e.jsx("div",{className:"text",children:"Progress"})]}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{n(!0),a(s.color_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{i(!0),a(s.color_id)},children:"delete"})]})]},s.color_id))}):e.jsxs("div",{className:"colors-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Color"}),e.jsx("div",{className:"head-col",children:"Sample"}),e.jsx("div",{className:"head-col",children:"Develope"}),e.jsx("div",{className:"head-col",children:"Action"})]}),t.filter(s=>{const u=h.toLowerCase();return s.color.toLowerCase().includes(u)}).map((s,u)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:u+1}),e.jsx("div",{className:"body-col",children:s.color}),e.jsx("div",{className:"body-col",children:e.jsx("span",{className:"body-col-box",style:{backgroundColor:`#${s.color}`}})}),e.jsx("div",{className:"body-col",children:s.is_develope===!0?e.jsx("span",{className:"progress",children:"Progress"}):e.jsx("span",{className:"done",children:"Done"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{n(!0),a(s.color_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{i(!0),a(s.color_id)},children:"delete"})]})]},s.color_id))]})]})}function F(){g.defaults.withCredentials=!0;const[c,t]=o.useState("grid"),[a,n]=o.useState(!1),[i,m]=o.useState(!1),[h,s]=o.useState(!1),[u,b]=o.useState(null),[j,f]=o.useState([]),{isLoadingDashboard:v,setDashboardLoader:N,token:C}=S(),k=o.useCallback(l=>{t(l)},[]),r=o.useCallback(async()=>{N(!0);try{const l=await g.get(y.colors,{headers:{Authorization:`Bearer ${C}`}});f(l.data.data)}catch(l){console.error(l)}finally{N(!1)}},[C]);return o.useEffect(()=>{r()},[r]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"colors-man",children:[e.jsx(P,{className:"colors-man",title:"Color Hexs Management â€” Colors",activeDisplay:c,handleDisplayChange:k,setIsCreateModalOpen:n}),c==="grid"?e.jsx(w,{isLoadingDashboard:v,colors:j,setColorId:b,setIsUpdateModalOpen:m,setIsDeleteModalOpen:s,type:"grid"}):e.jsx(w,{isLoadingDashboard:v,colors:j,setColorId:b,setIsUpdateModalOpen:m,setIsDeleteModalOpen:s,type:"list"}),e.jsx(D,{type:"create",onOpen:a,onClose:()=>n(!1),refreshData:r}),e.jsx(D,{type:"update",onOpen:i,onClose:()=>m(!1),refreshData:r,colorId:u}),e.jsx(D,{type:"delete",onOpen:h,onClose:()=>s(!1),refreshData:r,colorId:u})]})})}w.propTypes={type:x.string,colors:x.array,setColorId:x.func,isLoadingDashboard:x.bool,setIsUpdateModalOpen:x.func,setIsDeleteModalOpen:x.func};function q(){const{submenuPage:c,accessMenus:t,user:a}=S(),n=L();return o.useEffect(()=>{const i=setTimeout(()=>{(t==null?void 0:t.some(h=>h.role_id===(a==null?void 0:a.role_id)&&h.menu_id==="98e0bafb-3499-4123-954f-5dffbb42e80d"))===!1&&n("/403",{replace:!0})},1e4);return()=>clearTimeout(i)},[t,a,n]),e.jsx(e.Fragment,{children:e.jsx(A,{children:c==="3b37ca81-d163-442c-a445-099196844800"&&e.jsx(F,{})})})}export{q as default};
