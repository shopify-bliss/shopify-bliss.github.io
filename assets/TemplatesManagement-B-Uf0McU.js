import{P as u,a as f,r as i,i as C,e as b,j as e,l as P,k as E,u as L}from"./index-STaWKzCp.js";import{H as T}from"./SupportDashboard-B-r4-xwX.js";import{t as _,T as k}from"./ValidationSchema-jX_ynuZb.js";import{M as A}from"./Profile-DJ7Do7Z1.js";import{L as $}from"./LayoutDashboard-DZ5FwvdA.js";import"./AuthSupport-DSR2MxIb.js";import"./AiBuilderSupport-CiryAvtJ.js";import"./black-logo-KPU1N9jl.js";function S({type:r,onOpen:c,onClose:a,refreshData:d,pageId:o}){f.defaults.withCredentials=!0;const[m,h]=i.useState({type:"",icon:"",name_class:""}),{toastMessage:s,toastPromise:n,token:g}=C();i.useEffect(()=>{c&&r==="create"?h({type:"",icon:"",name_class:""}):c&&r==="update"&&f.get(`${b.pagesAiId}?id=${o}`).then(p=>{h(p.data.data)}).catch(p=>{console.error("Error fetching page data:",p)})},[c,r,o]);const N=p=>{const{name:t,value:l}=p.target;h({...m,[t]:l})},j=i.useCallback(p=>{p.preventDefault(),r==="create"?_.validate(m,{abortEarly:!1}).then(()=>{const t=f.post(b.pagesAi,m,{headers:{Authorization:`Bearer ${g}`}});n(t,{pending:"Adding page data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),t.catch(l=>{console.error("Error adding page data:",l)})}).catch(t=>{t.inner.forEach(l=>{s("error",l.message)})}):_.validate(m,{abortEarly:!1}).then(()=>{const t=f.put(`${b.pagesAi}?id=${o}`,m,{headers:{Authorization:`Bearer ${g}`}});n(t,{pending:"Updating page data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),t.catch(l=>{console.error("Error updating page data:",l)})}).catch(t=>{t.inner.forEach(l=>{s("error",l.message)})})},[r,m,a,d,s,n,o,g]),v=i.useCallback(p=>{p.preventDefault();const t=f.delete(`${b.pagesAi}?id=${o}`,{headers:{Authorization:`Bearer ${g}`}});n(t,{pending:"deleting page data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),t.catch(l=>{console.error("Error deleting page data:",l)})},[o,g,a,d,n]);return e.jsx(e.Fragment,{children:r==="delete"?e.jsx(A,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:v,children:"delete"})]})}):e.jsx(A,{titleModal:r==="create"?"Insert Page Data":"Update Page Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"type",children:["Page name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"type",name:"type",placeholder:"Home Page",value:m.type,onChange:N})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"icon",children:["Page icon ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"icon",name:"icon",placeholder:"home (google material icon)",value:m.icon,onChange:N})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}S.propTypes={type:u.string,onOpen:u.bool,onClose:u.func,refreshData:u.func,pageId:u.string};function D({isLoadingTempPages:r,pages:c,setPageId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:m}){const{search:h}=P();return e.jsxs(e.Fragment,{children:[r&&e.jsx(E,{}),m==="grid"?e.jsx("div",{className:"temp-pages-grid",children:c.filter(s=>{const n=h.toLowerCase();return s.type.toLowerCase().includes(n)||s.icon.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("span",{className:"material-symbols-rounded item-icon",children:s.icon}),e.jsx("div",{className:"item-name",children:s.type}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))}):e.jsxs("div",{className:"temp-pages-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Icon"}),e.jsx("div",{className:"head-col",children:"Google Material Icon"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.filter(s=>{const n=h.toLowerCase();return s.type.toLowerCase().includes(n)||s.icon.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("span",{className:"material-symbols-rounded body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.type}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))]})]})}function F(){f.defaults.withCredentials=!0;const[r,c]=i.useState([]),[a,d]=i.useState(!1),[o,m]=i.useState("grid"),[h,s]=i.useState(!1),[n,g]=i.useState(!1),[N,j]=i.useState(!1),[v,p]=i.useState(null),{token:t}=C(),l=i.useCallback(x=>{m(x)},[]),y=i.useCallback(async()=>{d(!0);try{const x=await f.get(b.pagesAi,{headers:{Authorization:`Bearer ${t}`}});c(x.data.data)}catch(x){console.error(x)}finally{d(!1)}},[t]);return i.useEffect(()=>{y()},[y]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-pages",children:[e.jsx(T,{className:"temp-pages",title:"Template Management — Pages",activeDisplay:o,handleDisplayChange:l,setIsCreateModalOpen:s}),o==="grid"?e.jsx(D,{isLoadingTempPages:a,pages:r,setPageId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(D,{isLoadingTempPages:a,pages:r,setPageId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:j,type:"list"}),e.jsx(S,{type:"create",onOpen:h,onClose:()=>s(!1),refreshData:y}),e.jsx(S,{type:"update",onOpen:n,onClose:()=>g(!1),refreshData:y,pageId:v}),e.jsx(S,{type:"delete",onOpen:N,onClose:()=>j(!1),refreshData:y,pageId:v})]})})}D.propTypes={isLoadingTempPages:u.bool,pages:u.array,setPageId:u.func,setIsUpdateModalOpen:u.func,setIsDeleteModalOpen:u.func,type:u.string};function w({type:r,onOpen:c,onClose:a,refreshData:d,sectionId:o}){f.defaults.withCredentials=!0;const[m,h]=i.useState({name:""}),{toastMessage:s,toastPromise:n,token:g}=C();i.useEffect(()=>{c&&r==="create"?h({name:""}):c&&r==="update"&&f.get(`${b.elementsAiId}?id=${o}`).then(p=>{h(p.data.data[0])}).catch(p=>{console.error("Error fetching section data:",p)})},[c,r,o]);const N=p=>{const{name:t,value:l}=p.target;h({...m,[t]:l})},j=i.useCallback(p=>{p.preventDefault(),r==="create"?k.validate(m,{abortEarly:!1}).then(()=>{const t=f.post(b.elementsAi,m,{headers:{Authorization:`Bearer ${g}`}});n(t,{pending:"Adding section data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),t.catch(l=>{console.error("Error adding section data:",l)})}).catch(t=>{t.inner.forEach(l=>{s("error",l.message)})}):k.validate(m,{abortEarly:!1}).then(()=>{const t=f.put(`${b.elementsAi}?id=${o}`,m,{headers:{Authorization:`Bearer ${g}`}});n(t,{pending:"Updating section data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),t.catch(l=>{console.error("Error updating section data:",l)})}).catch(t=>{t.inner.forEach(l=>{s("error",l.message)})})},[r,m,a,d,s,n,o,g]),v=i.useCallback(p=>{p.preventDefault();const t=f.delete(`${b.elementsAi}?id=${o}`,{headers:{Authorization:`Bearer ${g}`}});n(t,{pending:"deleting section data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),t.catch(l=>{console.error("Error deleting section data:",l)})},[o,g,a,d,n]);return e.jsx(e.Fragment,{children:r==="delete"?e.jsx(A,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:v,children:"delete"})]})}):e.jsx(A,{titleModal:r==="create"?"Insert Section Data":"Update Section Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Section name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Intro Section",value:m.name,onChange:N})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}w.propTypes={type:u.string.isRequired,onOpen:u.bool.isRequired,onClose:u.func.isRequired,refreshData:u.func.isRequired,sectionId:u.string};function M({isLoadingTempSections:r,sections:c,setSectionId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:m}){const{search:h}=P();return e.jsxs(e.Fragment,{children:[r&&e.jsx(E,{}),m==="grid"?e.jsx("div",{className:"temp-sections-grid",children:c.filter(s=>{const n=h.toLowerCase();return s.name.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))}):e.jsxs("div",{className:"temp-sections-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.filter(s=>{const n=h.toLowerCase();return s.name.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))]})]})}function O(){f.defaults.withCredentials=!0;const[r,c]=i.useState([]),[a,d]=i.useState(!1),[o,m]=i.useState("grid"),[h,s]=i.useState(!1),[n,g]=i.useState(!1),[N,j]=i.useState(!1),[v,p]=i.useState(null),{token:t}=C(),l=i.useCallback(x=>{m(x)},[]),y=i.useCallback(async()=>{d(!0);try{const x=await f.get(b.elementsAi,{headers:{Authorization:`Bearer ${t}`}});console.log(x.data.data),c(x.data.data)}catch(x){console.error(x)}finally{d(!1)}},[t]);return i.useEffect(()=>{y()},[y]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-sections",children:[e.jsx(T,{className:"temp-sections",title:"Template Management — Sections",activeDisplay:o,handleDisplayChange:l,setIsCreateModalOpen:s}),o==="grid"?e.jsx(M,{isLoadingTempSections:a,sections:r,setSectionId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(M,{isLoadingTempSections:a,sections:r,setSectionId:p,setIsUpdateModalOpen:g,setIsDeleteModalOpen:j,type:"list"}),e.jsx(w,{type:"create",onOpen:h,onClose:()=>s(!1),refreshData:y}),e.jsx(w,{type:"update",onOpen:n,onClose:()=>g(!1),refreshData:y,sectionId:v}),e.jsx(w,{type:"delete",onOpen:N,onClose:()=>j(!1),refreshData:y,sectionId:v})]})})}M.propTypes={isLoadingTempSections:u.bool,sections:u.array,setSectionId:u.func,setIsUpdateModalOpen:u.func,setIsDeleteModalOpen:u.func,type:u.string};function Y(){const{submenuPage:r,accessMenus:c,user:a}=C(),d=L();return i.useEffect(()=>{const o=setTimeout(()=>{(c==null?void 0:c.some(h=>h.role_id===(a==null?void 0:a.role_id)&&h.menu_id==="e0c2b209-08c0-4c8b-ae0d-77f86b088879"))===!1&&d("/403",{replace:!0})},1e4);return()=>clearTimeout(o)},[c,a,d]),e.jsx(e.Fragment,{children:e.jsxs($,{children:[r==="20c608ac-921c-47a3-955f-913949074a8d"&&e.jsx(F,{}),r==="cb84354f-a64a-48a7-98e4-198a932beed2"&&e.jsx(O,{})]})})}export{Y as default};
