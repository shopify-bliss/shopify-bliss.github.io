import{a as x,r as l,h as A,e as g,j as e,i as E,k,u as L}from"./index-CDJ0jnDt.js";import{H as M}from"./SupportDashboard-Bxym2j_N.js";import{t as N,T as C}from"./ValidationSchema-fCLfNoAd.js";import{M as v}from"./Profile-BhQr579U.js";import{L as P}from"./LayoutDashboard-SDbnnZvA.js";import"./AuthSupport-CWB7ohp4.js";import"./AiBuilderSupport-DYZNCyCB.js";import"./black-logo-KPU1N9jl.js";function S({type:r,onOpen:d,onClose:a,refreshData:i,pageId:o}){x.defaults.withCredentials=!0;const[m,h]=l.useState({type:"",icon:"",name_class:""}),{toastMessage:s,toastPromise:c,token:p}=A();l.useEffect(()=>{d&&r==="create"?h({type:"",icon:"",name_class:""}):d&&r==="update"&&x.get(`${g.pagesAiId}?id=${o}`).then(u=>{h(u.data.data)}).catch(u=>{console.error("Error fetching page data:",u)})},[d,r,o,g]);const b=u=>{const{name:n,value:t}=u.target;h({...m,[n]:t})},j=l.useCallback(u=>{u.preventDefault(),r==="create"?N.validate(m,{abortEarly:!1}).then(()=>{const n=x.post(g.pagesAi,m,{headers:{Authorization:`Bearer ${p}`}});c(n,{pending:"Adding page data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),i()}),n.catch(t=>{console.error("Error adding page data:",t)})}).catch(n=>{n.inner.forEach(t=>{s("error",t.message)})}):N.validate(m,{abortEarly:!1}).then(()=>{const n=x.put(`${g.pagesAi}?id=${o}`,m,{headers:{Authorization:`Bearer ${p}`}});c(n,{pending:"Updating page data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),i()}),n.catch(t=>{console.error("Error updating page data:",t)})}).catch(n=>{n.inner.forEach(t=>{s("error",t.message)})})},[N,m,a,i,s,c,o,p,g]),y=l.useCallback(u=>{u.preventDefault();const n=x.delete(`${g.pagesAi}?id=${o}`,{headers:{Authorization:`Bearer ${p}`}});c(n,{pending:"deleting page data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),i()}),n.catch(t=>{console.error("Error deleting page data:",t)})},[o,p,a,i]);return e.jsx(e.Fragment,{children:r==="delete"?e.jsx(v,{onClose:a,onOpen:d,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:y,children:"delete"})]})}):e.jsx(v,{titleModal:r==="create"?"Insert Page Data":"Update Page Data",onOpen:d,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"type",children:["Page name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"type",name:"type",placeholder:"Home Page",value:m.type,onChange:b})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"icon",children:["Page icon ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"icon",name:"icon",placeholder:"home (google material icon)",value:m.icon,onChange:b})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function D({isLoadingTempPages:r,pages:d,setPageId:a,setIsUpdateModalOpen:i,setIsDeleteModalOpen:o,type:m}){const{search:h}=E();return e.jsxs(e.Fragment,{children:[r&&e.jsx(k,{}),m==="grid"?e.jsx("div",{className:"temp-pages-grid",children:d.filter(s=>{const c=h.toLowerCase();return s.type.toLowerCase().includes(c)||s.icon.toLowerCase().includes(c)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("span",{className:"material-symbols-rounded item-icon",children:s.icon}),e.jsx("div",{className:"item-name",children:s.type}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{i(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))}):e.jsxs("div",{className:"temp-pages-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Icon"}),e.jsx("div",{className:"head-col",children:"Google Material Icon"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),d.filter(s=>{const c=h.toLowerCase();return s.type.toLowerCase().includes(c)||s.icon.toLowerCase().includes(c)}).map((s,c)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:c+1}),e.jsx("span",{className:"material-symbols-rounded body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.type}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{i(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))]})]})}function F(){x.defaults.withCredentials=!0;const[r,d]=l.useState([]),[a,i]=l.useState(!1),[o,m]=l.useState("grid"),[h,s]=l.useState(!1),[c,p]=l.useState(!1),[b,j]=l.useState(!1),[y,u]=l.useState(null),n=l.useCallback(f=>{m(f)},[]),t=l.useCallback(async()=>{i(!0);try{const f=await x.get(g.pagesAi);d(f.data.data),i(!1)}catch(f){console.error(f),i(!1)}finally{i(!1)}},[g.pagesAi]);return l.useEffect(()=>{t()},[t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-pages",children:[e.jsx(M,{className:"temp-pages",title:"Template Management â€” Pages",activeDisplay:o,handleDisplayChange:n,setIsCreateModalOpen:s}),o==="grid"?e.jsx(D,{isLoadingTempPages:a,pages:r,setPageId:u,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(D,{isLoadingTempPages:a,pages:r,setPageId:u,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"list"}),e.jsx(S,{type:"create",onOpen:h,onClose:()=>s(!1),refreshData:t}),e.jsx(S,{type:"update",onOpen:c,onClose:()=>p(!1),refreshData:t,pageId:y}),e.jsx(S,{type:"delete",onOpen:b,onClose:()=>j(!1),refreshData:t,pageId:y})]})})}function w({type:r,onOpen:d,onClose:a,refreshData:i,sectionId:o}){x.defaults.withCredentials=!0;const[m,h]=l.useState({name:""}),{toastMessage:s,toastPromise:c,token:p}=A();l.useEffect(()=>{d&&r==="create"?h({name:""}):d&&r==="update"&&x.get(`${g.elementsAiId}?id=${o}`).then(u=>{h(u.data.data[0])}).catch(u=>{console.error("Error fetching section data:",u)})},[d,r,o,g]);const b=u=>{const{name:n,value:t}=u.target;h({...m,[n]:t})},j=l.useCallback(u=>{u.preventDefault(),r==="create"?C.validate(m,{abortEarly:!1}).then(()=>{const n=x.post(g.elementsAi,m,{headers:{Authorization:`Bearer ${p}`}});c(n,{pending:"Adding section data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),i()}),n.catch(t=>{console.error("Error adding section data:",t)})}).catch(n=>{n.inner.forEach(t=>{s("error",t.message)})}):C.validate(m,{abortEarly:!1}).then(()=>{const n=x.put(`${g.elementsAi}?id=${o}`,m,{headers:{Authorization:`Bearer ${p}`}});c(n,{pending:"Updating section data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),i()}),n.catch(t=>{console.error("Error updating section data:",t)})}).catch(n=>{n.inner.forEach(t=>{s("error",t.message)})})},[C,m,a,i,s,c,o,p,g]),y=l.useCallback(u=>{u.preventDefault();const n=x.delete(`${g.elementsAi}?id=${o}`,{headers:{Authorization:`Bearer ${p}`}});c(n,{pending:"deleting section data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),i()}),n.catch(t=>{console.error("Error deleting section data:",t)})},[o,p,a,i]);return e.jsx(e.Fragment,{children:r==="delete"?e.jsx(v,{onClose:a,onOpen:d,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:y,children:"delete"})]})}):e.jsx(v,{titleModal:r==="create"?"Insert Section Data":"Update Section Data",onOpen:d,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Section name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Intro Section",value:m.name,onChange:b})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function _({isLoadingTempSections:r,sections:d,setSectionId:a,setIsUpdateModalOpen:i,setIsDeleteModalOpen:o,type:m}){const{search:h}=E();return e.jsxs(e.Fragment,{children:[r&&e.jsx(k,{}),m==="grid"?e.jsx("div",{className:"temp-sections-grid",children:d.filter(s=>{const c=h.toLowerCase();return s.name.toLowerCase().includes(c)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{i(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))}):e.jsxs("div",{className:"temp-sections-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),d.filter(s=>{const c=h.toLowerCase();return s.name.toLowerCase().includes(c)}).map((s,c)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:c+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{i(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))]})]})}function T(){x.defaults.withCredentials=!0;const[r,d]=l.useState([]),[a,i]=l.useState(!1),[o,m]=l.useState("grid"),[h,s]=l.useState(!1),[c,p]=l.useState(!1),[b,j]=l.useState(!1),[y,u]=l.useState(null),n=l.useCallback(f=>{m(f)},[]),t=l.useCallback(async()=>{i(!0);try{const f=await x.get(g.elementsAi);d(f.data.data),i(!1)}catch(f){console.error(f),i(!1)}finally{i(!1)}},[g.elementsAi]);return l.useEffect(()=>{t()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-sections",children:[e.jsx(M,{className:"temp-sections",title:"Template Management â€” Sections",activeDisplay:o,handleDisplayChange:n,setIsCreateModalOpen:s}),o==="grid"?e.jsx(_,{isLoadingTempSections:a,sections:r,setSectionId:u,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(_,{isLoadingTempSections:a,sections:r,setSectionId:u,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"list"}),e.jsx(w,{type:"create",onOpen:h,onClose:()=>s(!1),refreshData:t}),e.jsx(w,{type:"update",onOpen:c,onClose:()=>p(!1),refreshData:t,sectionId:y}),e.jsx(w,{type:"delete",onOpen:b,onClose:()=>j(!1),refreshData:t,sectionId:y})]})})}function $(){return e.jsx(e.Fragment,{children:e.jsx("div",{children:"Colors"})})}function q(){return e.jsx(e.Fragment,{children:e.jsx("div",{children:"Fonts"})})}function G(){const{submenuPage:r,accessMenus:d,user:a}=A(),i=L();return l.useEffect(()=>{const o=setTimeout(()=>{(d==null?void 0:d.some(h=>h.role_id===(a==null?void 0:a.role_id)&&h.menu_id==="e0c2b209-08c0-4c8b-ae0d-77f86b088879"))===!1&&i("/403",{replace:!0})},1e4);return()=>clearTimeout(o)},[d,a,i]),e.jsx(e.Fragment,{children:e.jsxs(P,{children:[r==="overview"&&e.jsx("span",{children:"test"}),r==="pages"&&e.jsx(F,{}),r==="sections"&&e.jsx(T,{}),r==="colors"&&e.jsx($,{}),r==="fonts"&&e.jsx(q,{})]})})}export{G as default};
