import{h,j as e,r as i,N as g,u as b,d as L,L as k,P as _}from"./index-b4tCd78A.js";import{L as C}from"./AiBuilderSupport-ZChM1qdV.js";import{P as y}from"./Profile-DwVrfMSh.js";function P(){const{menus:n,accessMenus:t,user:o}=h();return e.jsx("div",{className:"layout-dashboard-sidebar",children:n.map(a=>{const c=t.filter(l=>l.role_id===(o==null?void 0:o.role_id)&&l.menu_id===a.menu_id&&a.menu_id!=="6556df8f-7cd6-4848-b39f-1e6ab4973311");return e.jsx(i.Fragment,{children:c.map(l=>e.jsxs(g,{to:`/${a.url}`,className:"sidebar-list",children:[e.jsx("div",{className:"sidebar-list-item",children:a.name}),e.jsx("div",{className:"border-effect"})]},l.access_id))},a.menu_id)})})}function M(){const[n,t]=i.useState(!1),[o,a]=i.useState(!1),c=i.useRef(null),{submenus:l,activeMenu:v,handleSubmenuPage:x,submenuPage:j,toastDevelop:m,menus:p,user:r,token:u}=h(),f=b(),d=i.useCallback(s=>{c.current&&!c.current.contains(s.target)&&t(!1)},[c]);i.useEffect(()=>(n?document.addEventListener("mousedown",d):document.removeEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}),[n,d]);const N=i.useCallback(()=>{u&&(L.remove("shopify-bliss"),f("/login",{state:{messageLogout:"Logout successfully!"}}))},[u,f]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"layout-dashboard-topbar",children:[e.jsx(C,{}),e.jsx("div",{className:"links",children:l.filter(s=>s.menu_id===v).map(s=>e.jsx("div",{className:`links-item ${s.name===j?"active":""}`,onClick:()=>x(s.name),children:s.name},s.sub_menu_id))}),e.jsxs("div",{className:"config",children:[e.jsx("div",{className:"config-help",onClick:()=>{m("help")},children:"Help"}),e.jsxs("div",{className:"config-account",onClick:()=>t(!0),children:[e.jsx("div",{className:"text",children:"Account Setting"}),e.jsx("img",{src:`/avatar/${r==null?void 0:r.avatar}`,alt:"Profile image's"})]}),n?e.jsxs("div",{className:"account-modal",ref:c,children:[e.jsxs("div",{className:"account-modal-profile",children:[e.jsx("div",{className:"username",children:r.username}),e.jsx("div",{className:"email",children:r.email})]}),p.filter(s=>s.menu_id==="6556df8f-7cd6-4848-b39f-1e6ab4973311").map(s=>e.jsx(k,{className:"account-modal-item",onClick:()=>{a(!0),t(!1)},children:s.name},s.menu_id)),e.jsx("div",{className:"account-modal-item",onClick:()=>{m("notifications")},children:"Notifications"}),e.jsx("div",{className:"account-modal-item",onClick:()=>{m("language")},children:"Language"}),e.jsx("div",{className:"account-modal-item",onClick:N,children:"Logout"})]}):""]})]}),o?e.jsx(y,{onOpen:o,onClose:()=>a(!1)}):""]})}const E=({children:n})=>e.jsxs("div",{className:"layout-dashboard",children:[e.jsx(P,{}),e.jsx(M,{}),e.jsx("div",{className:"layout-dashboard-content",children:n})]});E.propTypes={children:_.node};export{E as L};
