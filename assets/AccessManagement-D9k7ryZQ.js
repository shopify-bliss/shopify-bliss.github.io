import{P as i,a as v,r as t,h as S,e as C,j as e,i as O,k as P,L as B,u as J}from"./index-DZggXJSs.js";import{L as K}from"./LayoutDashboard-BCVNmwei.js";import{H as T}from"./SupportDashboard-558qYPK8.js";import{M as H,S as X,A as Q,R as G}from"./ValidationSchema-B1e9lddX.js";import{M as E}from"./Profile-Dfow3IMi.js";import"./AiBuilderSupport-DYOKJHIB.js";import"./black-logo-KPU1N9jl.js";import"./AuthSupport-FvQJ3xJj.js";function $({type:l,onOpen:o,onClose:a,refreshData:m,menuId:d}){v.defaults.withCredentials=!0;const[c,x]=t.useState({name:"",url:""}),{toastMessage:s,toastPromise:n,token:h}=S();t.useEffect(()=>{o&&l==="create"?x({name:"",url:""}):o&&l==="update"&&v.get(`${C.menusId}?id=${d}`).then(u=>{x(u.data.data[0])}).catch(u=>{console.error("Error fetching menu data:",u)})},[o,l,d]);const j=u=>{const{name:r,value:p}=u.target;x({...c,[r]:p})},b=t.useCallback(u=>{u.preventDefault(),l==="create"?H.validate(c,{abortEarly:!1}).then(()=>{const r=v.post(C.menus,c,{headers:{Authorization:`Bearer ${h}`}});n(r,{pending:"Adding menu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),r.catch(p=>{console.error("Error adding menu data:",p)})}).catch(r=>{r.inner.forEach(p=>{s("error",p.message)})}):H.validate(c,{abortEarly:!1}).then(()=>{const r=v.put(`${C.menus}?id=${d}`,c,{headers:{Authorization:`Bearer ${h}`}});n(r,{pending:"Updating menu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),r.catch(p=>{console.error("Error updating menu data:",p)})}).catch(r=>{r.inner.forEach(p=>{s("error",p.message)})})},[c,a,m,s,n,d,h,l]),N=t.useCallback(u=>{u.preventDefault();const r=v.delete(`${C.menus}?id=${d}`,{headers:{Authorization:`Bearer ${h}`}});n(r,{pending:"deleting menu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),r.catch(p=>{console.error("Error deleting menu data:",p)})},[d,h,a,m,n]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:o,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:N,children:"delete"})]})}):e.jsx(E,{titleModal:l==="create"?"Insert Menu Data":"Update Menu Data",onOpen:o,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:b,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Menu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:c.name,onChange:j})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"url",children:["Menu url ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"url",name:"url",placeholder:"access-management",value:c.url,onChange:j})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}$.propTypes={type:i.string,onOpen:i.bool,onClose:i.func,refreshData:i.func,menuId:i.number};function q({isLoadingDashboard:l,menus:o,setMenuId:a,setIsUpdateModalOpen:m,setIsDeleteModalOpen:d,type:c}){const{search:x}=O();return e.jsxs(e.Fragment,{children:[l&&e.jsx(P,{}),c==="grid"?e.jsx("div",{className:"menu-man-grid",children:o.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.url.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(B,{to:`/${s.url}`,className:"item-url",children:s.url}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{m(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{d(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))}):e.jsxs("div",{className:"menu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Url"}),e.jsx("div",{className:"head-col",children:"Action"})]}),o.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.url.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx(B,{to:`/${s.url}`,className:"body-col",children:s.url}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{m(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{d(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))]})]})}function W(){v.defaults.withCredentials=!0;const[l,o]=t.useState("grid"),[a,m]=t.useState(!1),[d,c]=t.useState(!1),[x,s]=t.useState(!1),[n,h]=t.useState(null),{menus:j,fetchDashboardData:b,isLoadingDashboard:N}=S(),u=t.useCallback(r=>{o(r)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"menu-man",children:[e.jsx(T,{className:"menu-man",title:"Menu Management — Menus",activeDisplay:l,handleDisplayChange:u,setIsCreateModalOpen:m}),l==="grid"?e.jsx(q,{isLoadingDashboard:N,menus:j,setMenuId:h,setIsUpdateModalOpen:c,setIsDeleteModalOpen:s,type:"grid"}):e.jsx(q,{isLoadingDashboard:N,menus:j,setMenuId:h,setIsUpdateModalOpen:c,setIsDeleteModalOpen:s,type:"list"}),e.jsx($,{type:"create",onOpen:a,onClose:()=>m(!1),refreshData:b}),e.jsx($,{type:"update",onOpen:d,onClose:()=>c(!1),refreshData:b,menuId:n}),e.jsx($,{type:"delete",onOpen:x,onClose:()=>s(!1),refreshData:b,menuId:n})]})})}q.propTypes={type:i.string,menus:i.array,setMenuId:i.func,isLoadingDashboard:i.bool,setIsUpdateModalOpen:i.func,setIsDeleteModalOpen:i.func};function R({type:l,onOpen:o,onClose:a,refreshData:m,submenuId:d}){v.defaults.withCredentials=!0;const[c,x]=t.useState(!1),[s,n]=t.useState(""),[h,j]=t.useState(!1),[b,N]=t.useState(""),u=t.useRef(null),{toastMessage:r,toastPromise:p,menus:_,token:M}=S(),y=t.useCallback(g=>{u.current&&!u.current.contains(g.target)&&x(!1)},[u]);t.useEffect(()=>(c?document.addEventListener("mousedown",y):document.removeEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}),[c,y]),t.useEffect(()=>{o&&l==="create"?(N(""),n(""),j(!1)):o&&l==="update"&&v.get(`${C.submenusId}?id=${d}`,{headers:{Authorization:`Bearer ${M}`}}).then(g=>{N(g.data.data.name),n(g.data.data.menu_id),j(g.data.data.default)}).catch(g=>{console.error("Error fetching submenu data:",g)})},[o,l,d,M]);const k=t.useCallback(g=>{g.preventDefault();const A={menuID:s,name:b,defaults:h};l==="create"?X.validate(A,{abortEarly:!1}).then(()=>{const f=v.post(C.submenus,A,{headers:{Authorization:`Bearer ${M}`}});p(f,{pending:"Adding submenu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),f.catch(w=>{console.error("Error adding submenu data:",w)})}).catch(f=>{f.inner.forEach(w=>{r("error",w.message)})}):X.validate(A,{abortEarly:!1}).then(()=>{const f=v.put(`${C.submenus}?id=${d}`,A,{headers:{Authorization:`Bearer ${M}`}});p(f,{pending:"Updating submenu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),f.catch(w=>{console.error("Error updating submenu data:",w)})}).catch(f=>{f.inner.forEach(w=>{r("error",w.message)})})},[l,b,s,h,a,m,r,p,M,d]),D=t.useCallback(g=>{g.preventDefault();const A=v.delete(`${C.submenus}?id=${d}`,{headers:{Authorization:`Bearer ${M}`}});p(A,{pending:"deleting submenu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),A.catch(f=>{console.error("Error deleting submenu data:",f)})},[M,d,a,m,p]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:o,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:D,children:"delete"})]})}):e.jsx(E,{titleModal:l==="create"?"Insert Submenu Data":"Update Submenu Data",onOpen:o,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:k,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu Parent ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>x(!0),children:[e.jsx("div",{className:"text",children:s===""?"Select Menu Parent":_.filter(g=>g.menu_id===s).map(g=>g.name)}),e.jsx("span",{className:`material-symbols-outlined ${c?"default-closed":""}`,children:"south_east"})]}),c&&e.jsx("div",{className:"select-list",ref:u,children:_.filter(g=>g.menu_id!==s).map(g=>e.jsx("div",{className:"select-list-item",onClick:()=>{n(g.menu_id),x(!1)},children:e.jsx("div",{className:"name",children:g.name})},g.menu_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Submenu Name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Analytics XX",value:b,onChange:g=>N(g.target.value)})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Default ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-default",onClick:()=>j(!h),children:[e.jsx("span",{className:"material-symbols-outlined",children:h?"task_alt":"circle"}),e.jsx("div",{className:"text",children:h?"True":"Null"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}R.propTypes={type:i.string,onOpen:i.bool,onClose:i.func,refreshData:i.func,submenuId:i.number};function U({isLoadingDashboard:l,submenus:o,setSubmenuId:a,setIsUpdateModalOpen:m,setIsDeleteModalOpen:d,type:c}){const{search:x}=O();return e.jsxs(e.Fragment,{children:[l&&e.jsx(P,{}),c==="grid"?e.jsx("div",{className:"submenu-man-grid",children:o.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.menus.url.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(B,{className:"item-menu",to:`/${s.menus.url}`,children:s.menus.url}),e.jsxs("div",{className:"item-action",children:[s.default===!0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"item-action-default",children:[e.jsx("span",{className:"material-symbols-outlined item-action-default-icon",children:"settings"}),e.jsx("span",{className:"item-action-default-text",children:"Default"})]})}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{m(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{d(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))}):e.jsxs("div",{className:"submenu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Default"}),e.jsx("div",{className:"head-col",children:"Action"})]}),o.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.menus.url.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx("div",{className:"body-col",children:s.menus.name}),e.jsx("div",{className:"body-col",children:s.default===!0?e.jsx("span",{className:"default",children:"Default"}):e.jsx("span",{className:"nope",children:"-"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{m(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{d(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))]})]})}function Z(){v.defaults.withCredentials=!0;const[l,o]=t.useState("grid"),[a,m]=t.useState(!1),[d,c]=t.useState(!1),[x,s]=t.useState(!1),[n,h]=t.useState(null),{submenus:j,fetchDashboardData:b,isLoadingDashboard:N}=S(),u=t.useCallback(r=>{o(r)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"submenu-man",children:[e.jsx(T,{className:"submenu-man",title:"Menu Management — Submenus",activeDisplay:l,handleDisplayChange:u,setIsCreateModalOpen:m}),l==="grid"?e.jsx(U,{isLoadingDashboard:N,submenus:j,setSubmenuId:h,setIsUpdateModalOpen:c,setIsDeleteModalOpen:s,type:"grid"}):e.jsx(U,{isLoadingDashboard:N,submenus:j,setSubmenuId:h,setIsUpdateModalOpen:c,setIsDeleteModalOpen:s,type:"list"}),e.jsx(R,{type:"create",onOpen:a,onClose:()=>m(!1),refreshData:b}),e.jsx(R,{type:"update",onOpen:d,onClose:()=>c(!1),refreshData:b,submenuId:n}),e.jsx(R,{type:"delete",onOpen:x,onClose:()=>s(!1),refreshData:b,submenuId:n})]})})}U.propTypes={isLoadingDashboard:i.bool,submenus:i.array,setSubmenuId:i.func,setIsUpdateModalOpen:i.func,setIsDeleteModalOpen:i.func,type:i.string};function I({type:l,onOpen:o,onClose:a,accessId:m,roles:d}){v.defaults.withCredentials=!0;const[c,x]=t.useState(!1),[s,n]=t.useState(!1),[h,j]=t.useState(""),[b,N]=t.useState(""),u=t.useRef(null),r=t.useRef(null),{toastMessage:p,toastPromise:_,menus:M,token:y,fetchDashboardData:k}=S(),D=t.useCallback(f=>{u.current&&!u.current.contains(f.target)?x(!1):r.current&&!r.current.contains(f.target)&&n(!1)},[u,r]);t.useEffect(()=>(c||s?document.addEventListener("mousedown",D):document.removeEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}),[c,s,D]),t.useEffect(()=>{o&&l==="create"&&(N(""),j(""))},[o,l]);const g=t.useCallback(f=>{f.preventDefault();const w={menuID:h,roleID:b};Q.validate(w,{abortEarly:!1}).then(()=>{const L=v.post(C.accessManagement,w,{headers:{Authorization:`Bearer ${y}`}});_(L,{pending:"Adding access data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),k()}),L.catch(z=>{console.error("Error adding access data:",z)})}).catch(L=>{L.inner.forEach(z=>{p("error",z.message)})})},[b,h,a,k,y,p,_]),A=t.useCallback(f=>{f.preventDefault();const w=v.delete(`${C.accessManagement}?id=${m}`,{headers:{Authorization:`Bearer ${y}`}});_(w,{pending:"deleting access data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),k()}),w.catch(L=>{console.error("Error deleting access data:",L)})},[y,_,m,a,k]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:o,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:A,children:"delete"})]})}):e.jsx(E,{titleModal:"Insert Access Data",onOpen:o,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:g,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Role ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>n(!0),children:[e.jsx("div",{className:"text",children:b===""?"Choose Role":d.filter(f=>f.role_id===b).map(f=>f.role_name)}),e.jsx("span",{className:`material-symbols-outlined ${s?"default-closed":""}`,children:"south_east"})]}),s&&e.jsx("div",{className:"select-list no-more",ref:r,children:d.filter(f=>f.role_id!==b).map(f=>e.jsx("div",{className:"select-list-item",onClick:()=>{N(f.role_id),n(!1)},children:e.jsx("div",{className:"name",children:f.role_name})},f.role_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>x(!0),children:[e.jsx("div",{className:"text",children:h===""?"Choose Menu":M.filter(f=>f.menu_id===h).map(f=>f.name)}),e.jsx("span",{className:`material-symbols-outlined ${c?"default-closed":""}`,children:"south_east"})]}),c&&e.jsx("div",{className:"select-list",ref:u,children:M.filter(f=>f.menu_id!==h).map(f=>e.jsx("div",{className:"select-list-item",onClick:()=>{j(f.menu_id),x(!1)},children:e.jsx("div",{className:"name",children:f.name})},f.menu_id))})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}I.propTypes={type:i.string,onOpen:i.bool,onClose:i.func,refreshData:i.func,accessId:i.number,roles:i.array};function V({accessMenus:l,setAccessId:o,setIsDeleteModalOpen:a,type:m,menus:d,activeRole:c,handleActiveRole:x,roles:s,isLoadingDashboard:n}){const{search:h}=O();return e.jsxs(e.Fragment,{children:[n&&e.jsx(P,{}),e.jsxs("div",{className:"access-man-wrapper",children:[e.jsx("div",{className:"access-man-roles",children:s.length>0?s.filter(j=>{const b=h.toLowerCase();return j.role_name.toLowerCase().includes(b)}).map(j=>e.jsx("div",{className:`role ${c===j.role_id?"active":""}`,onClick:()=>x(j.role_id),children:j.role_name},j.role_id)):null}),m==="grid"?e.jsx("div",{className:"access-man-grid",children:d.map(j=>{const b=l.find(u=>u.menu_id===j.menu_id&&u.role_id===c),N=!!b;return e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:j.name}),e.jsx("span",{className:"material-symbols-outlined item-check",children:N?"task_alt":"circle"}),e.jsx("div",{className:"item-action",children:N&&e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{a(!0),o(b.access_id)},children:"delete"})})]},j.menu_id)})}):e.jsxs("div",{className:"access-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Access"}),e.jsx("div",{className:"head-col",children:"Action"})]}),d.map((j,b)=>{const N=l.find(r=>r.menu_id===j.menu_id&&r.role_id===c),u=!!N;return e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:b+1}),e.jsx("div",{className:"body-col",children:j.name}),e.jsx("div",{className:"body-col material-symbols-outlined",children:u?"task_alt":"circle"}),e.jsx("div",{className:"body-col",children:u&&e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{a(!0),o(N.access_id)},children:"delete"})})]},j.menu_id)})]})]})]})}function ee(){v.defaults.withCredentials=!0;const[l,o]=t.useState("3de65f44-6341-4b4d-8d9f-c8ca3ea80b80"),[a,m]=t.useState([]),[d,c]=t.useState("list"),[x,s]=t.useState(!1),[n,h]=t.useState(!1),[j,b]=t.useState(null),{accessMenus:N,menus:u,token:r,isLoadingDashboard:p,setDashboardLoader:_}=S(),M=t.useCallback(D=>{c(D)},[]),y=t.useCallback(D=>{o(D)},[]),k=t.useCallback(async()=>{_(!0);try{const D=await v.get(C.role,{headers:{Authorization:`Bearer ${r}`}});console.log(D.data.data),m(D.data.data)}catch(D){console.error(D)}finally{_(!1)}},[r,_]);return t.useEffect(()=>{k()},[k]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"access-man",children:[e.jsx(T,{className:"access-man",title:"Menu Management — Access Menu",activeDisplay:d,handleDisplayChange:M,setIsCreateModalOpen:s}),d==="grid"?e.jsx(V,{roles:a,isLoadingDashboard:p,accessMenus:N,setAccessId:b,setIsDeleteModalOpen:h,type:"grid",menus:u,activeRole:l,handleActiveRole:y}):e.jsx(V,{roles:a,isLoadingDashboard:p,accessMenus:N,setAccessId:b,setIsDeleteModalOpen:h,type:"list",menus:u,activeRole:l,handleActiveRole:y}),e.jsx(I,{type:"create",onOpen:x,onClose:()=>s(!1),roles:a}),e.jsx(I,{type:"delete",onOpen:n,onClose:()=>h(!1),accessId:j,roles:a})]})})}V.propTypes={accessMenus:i.array,setAccessId:i.func,setIsDeleteModalOpen:i.func,type:i.string,menus:i.array,activeRole:i.string,handleActiveRole:i.func,roles:i.array,isLoadingDashboard:i.bool};function F({type:l,onOpen:o,onClose:a,refreshData:m,roleId:d}){v.defaults.withCredentials=!0;const[c,x]=t.useState({roleName:""}),{toastMessage:s,toastPromise:n,token:h}=S();t.useEffect(()=>{o&&l==="create"?x({roleName:""}):o&&l==="update"&&v.get(`${C.roleId}?id=${d}`,{headers:{Authorization:`Bearer ${h}`}}).then(u=>{console.log(u.data.data),x({roleName:u.data.data.role_name})}).catch(u=>{console.error("Error fetching role data:",u)})},[o,l,d,h]);const j=u=>{const{name:r,value:p}=u.target;x({...c,[r]:p})},b=t.useCallback(u=>{u.preventDefault(),l==="create"?G.validate(c,{abortEarly:!1}).then(()=>{const r=v.post(C.role,c,{headers:{Authorization:`Bearer ${h}`}});n(r,{pending:"Adding role data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),r.catch(p=>{console.error("Error adding role data:",p)})}).catch(r=>{r.inner.forEach(p=>{s("error",p.message)})}):G.validate(c,{abortEarly:!1}).then(()=>{const r=v.put(`${C.role}?id=${d}`,c,{headers:{Authorization:`Bearer ${h}`}});n(r,{pending:"Updating role data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),r.catch(p=>{console.error("Error updating role data:",p)})}).catch(r=>{r.inner.forEach(p=>{s("error",p.message)})})},[l,c,h,a,m,s,n,d]),N=t.useCallback(u=>{u.preventDefault();const r=v.delete(`${C.role}?id=${d}`,{headers:{Authorization:`Bearer ${h}`}});n(r,{pending:"deleting role data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),m()}),r.catch(p=>{console.error("Error deleting role data:",p)})},[d,h,a,m,n]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx(E,{onClose:a,onOpen:o,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:N,children:"delete"})]})}):e.jsx(E,{titleModal:l==="create"?"Insert Role Data":"Update Role Data",onOpen:o,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:b,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"roleName",children:["Role name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"roleName",name:"roleName",placeholder:"Admin",value:c.roleName,onChange:j})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}F.propTypes={type:i.string,onOpen:i.bool,onClose:i.func,refreshData:i.func,roleId:i.number};function Y({isLoadingDashboard:l,roles:o,setRoleId:a,setIsUpdateModalOpen:m,setIsDeleteModalOpen:d,type:c}){const{search:x}=O();return e.jsxs(e.Fragment,{children:[l&&e.jsx(P,{}),c==="grid"?e.jsx("div",{className:"role-man-grid",children:o.filter(s=>{const n=x.toLowerCase();return s.role_name.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.role_name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{m(!0),a(s.role_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{d(!0),a(s.role_id)},children:"delete"})]})]},s.role_id))}):e.jsxs("div",{className:"role-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),o.filter(s=>{const n=x.toLowerCase();return s.role_name.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.role_name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{m(!0),a(s.role_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{d(!0),a(s.role_id)},children:"delete"})]})]},s.role_id))]})]})}function se(){v.defaults.withCredentials=!0;const[l,o]=t.useState([]),[a,m]=t.useState("grid"),[d,c]=t.useState(!1),[x,s]=t.useState(!1),[n,h]=t.useState(!1),[j,b]=t.useState(null),{fetchDashboardData:N,token:u,isLoadingDashboard:r,setDashboardLoader:p}=S(),_=t.useCallback(y=>{m(y)},[]),M=t.useCallback(async()=>{p(!0);try{const y=await v.get(C.role,{headers:{Authorization:`Bearer ${u}`}});o(y.data.data)}catch(y){console.error("Error fetching roles:",y)}finally{p(!1)}},[u,p]);return t.useEffect(()=>{M()},[M]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"role-man",children:[e.jsx(T,{className:"role-man",title:"Role Management — Roles",activeDisplay:a,handleDisplayChange:_,setIsCreateModalOpen:c}),a==="grid"?e.jsx(Y,{isLoadingDashboard:r,roles:l,setRoleId:b,setIsUpdateModalOpen:s,setIsDeleteModalOpen:h,type:"grid"}):e.jsx(Y,{isLoadingDashboard:r,roles:l,setRoleId:b,setIsUpdateModalOpen:s,setIsDeleteModalOpen:h,type:"list"}),e.jsx(F,{type:"create",onOpen:d,onClose:()=>c(!1),refreshData:N}),e.jsx(F,{type:"update",onOpen:x,onClose:()=>s(!1),refreshData:N,roleId:j}),e.jsx(F,{type:"delete",onOpen:n,onClose:()=>h(!1),refreshData:N,roleId:j})]})})}Y.propTypes={isLoadingDashboard:i.bool,roles:i.array,setRoleId:i.func,setIsUpdateModalOpen:i.func,setIsDeleteModalOpen:i.func,type:i.string};function de(){const{submenuPage:l,accessMenus:o,user:a}=S(),m=J();return t.useEffect(()=>{const d=setTimeout(()=>{(o==null?void 0:o.some(x=>x.role_id===(a==null?void 0:a.role_id)&&x.menu_id==="b37d4e96-87b0-4480-805e-562ccd798338"))===!1&&m("/403",{replace:!0})},1e4);return()=>clearTimeout(d)},[o,a,m]),e.jsx(e.Fragment,{children:e.jsxs(K,{children:[l==="access"&&e.jsx(ee,{}),l==="menu"&&e.jsx(W,{}),l==="submenu"&&e.jsx(Z,{}),l==="role"&&e.jsx(se,{})]})})}export{de as default};
