import{h as f,j as e,r as i,N as b,u as p,d as L,L as k}from"./index-BLOQ8UXG.js";import{L as _}from"./AiBuilderSupport-CQgpAMnV.js";import{P as C}from"./Profile-u7nIDfV3.js";function M(){const{menus:n,accessMenus:t,user:o}=f();return e.jsx("div",{className:"layout-dashboard-sidebar",children:n.map(a=>{const c=t.filter(l=>l.role_id===(o==null?void 0:o.role_id)&&l.menu_id===a.menu_id&&a.menu_id!=="6556df8f-7cd6-4848-b39f-1e6ab4973311");return e.jsx(i.Fragment,{children:c.map(l=>e.jsxs(b,{to:`/${a.url}`,className:"sidebar-list",children:[e.jsx("div",{className:"sidebar-list-item",children:a.name}),e.jsx("div",{className:"border-effect"})]},l.access_id))},a.menu_id)})})}function y(){const[n,t]=i.useState(!1),[o,a]=i.useState(!1),c=i.useRef(null),{submenus:l,activeMenu:h,handleSubmenuPage:v,submenuPage:x,toastDevelop:r,menus:j,user:d,token:u}=f(),N=p(),m=i.useCallback(s=>{c.current&&!c.current.contains(s.target)&&t(!1)},[c]);i.useEffect(()=>(n?document.addEventListener("mousedown",m):document.removeEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}),[n]);const g=i.useCallback(()=>{u&&(L.remove("shopify-bliss"),N("/login",{state:{messageLogout:"Logout successfully!"}}))},[u]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"layout-dashboard-topbar",children:[e.jsx(_,{}),e.jsx("div",{className:"links",children:l.filter(s=>s.menu_id===h).map(s=>e.jsx("div",{className:`links-item ${s.name===x?"active":""}`,onClick:()=>v(s.name),children:s.name},s.sub_menu_id))}),e.jsxs("div",{className:"config",children:[e.jsx("div",{className:"config-help",onClick:()=>{r("help")},children:"Help"}),e.jsxs("div",{className:"config-account",onClick:()=>t(!0),children:[e.jsx("div",{className:"text",children:"Account Setting"}),e.jsx("img",{src:`/avatar/${d==null?void 0:d.avatar}`,alt:"Profile image's"})]}),n?e.jsxs("div",{className:"account-modal",ref:c,children:[e.jsxs("div",{className:"account-modal-profile",children:[e.jsx("div",{className:"username",children:d.username}),e.jsx("div",{className:"email",children:d.email})]}),j.filter(s=>s.menu_id==="6556df8f-7cd6-4848-b39f-1e6ab4973311").map(s=>e.jsx(k,{className:"account-modal-item",onClick:()=>{a(!0),t(!1)},children:s.name},s.menu_id)),e.jsx("div",{className:"account-modal-item",onClick:()=>{r("notifications")},children:"Notifications"}),e.jsx("div",{className:"account-modal-item",onClick:()=>{r("language")},children:"Language"}),e.jsx("div",{className:"account-modal-item",onClick:g,children:"Logout"})]}):""]})]}),o?e.jsx(C,{onOpen:o,onClose:()=>a(!1)}):""]})}const w=({children:n})=>e.jsxs("div",{className:"layout-dashboard",children:[e.jsx(M,{}),e.jsx(y,{}),e.jsx("div",{className:"layout-dashboard-content",children:n})]});export{w as L};
