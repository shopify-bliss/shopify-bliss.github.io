import{a as M,r as l,h as k,i as E,d as g,f as e,L as O}from"./index-BZSCxJql.js";import{L as H}from"./LayoutDashboard-CKRNvR8-.js";import{Error401 as X,Error403 as G}from"./Error-5CmM0YFy.js";import{H as V}from"./SupportDashboard-CxvdUq8n.js";import{M as F,S as R,A as z}from"./ValidationSchema-CdbMnuiI.js";import{M as A}from"./Modal-C6dI4g_g.js";import"./AiBuilderSupport-DIRpQrrE.js";import"./black-logo-KPU1N9jl.js";import"./Profile-CEge5jb3.js";import"./AuthSupport-CMBJa0HJ.js";function L({type:c,onOpen:d,onClose:a,refreshData:t,menuId:i}){M.defaults.withCredentials=!0;const[n,s]=l.useState({name:"",url:""}),{toastMessage:r,toastPromise:o}=k(),{token:u}=E();l.useEffect(()=>{d&&c==="create"?s({name:"",url:""}):d&&c==="update"&&M.get(`${g.menusId}?id=${i}`).then(p=>{s(p.data.data[0])}).catch(p=>{console.error("Error fetching menu data:",p)})},[d,c,i,g]);const f=p=>{const{name:h,value:b}=p.target;s({...n,[h]:b})},x=l.useCallback(p=>{p.preventDefault(),c==="create"?F.validate(n,{abortEarly:!1}).then(()=>{const h=M.post(g.menus,n,{headers:{Authorization:`Bearer ${u}`}});o(h,{pending:"Adding menu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),h.catch(b=>{console.error("Error adding menu data:",b)})}).catch(h=>{h.inner.forEach(b=>{r("error",b.message)})}):F.validate(n,{abortEarly:!1}).then(()=>{const h=M.put(`${g.menus}?id=${i}`,n,{headers:{Authorization:`Bearer ${u}`}});o(h,{pending:"Updating menu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),h.catch(b=>{console.error("Error updating menu data:",b)})}).catch(h=>{h.inner.forEach(b=>{r("error",b.message)})})},[F,n,a,t,r,o,i,u,g]),N=l.useCallback(p=>{p.preventDefault();const h=M.delete(`${g.menus}?id=${i}`,{headers:{Authorization:`Bearer ${u}`}});o(h,{pending:"deleting menu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),h.catch(b=>{console.error("Error deleting menu data:",b)})},[i,u,a,t]);return e.jsx(e.Fragment,{children:c==="delete"?e.jsx(A,{onClose:a,onOpen:d,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:N,children:"delete"})]})}):e.jsx(A,{titleModal:c==="create"?"Insert Menu Data":"Update Menu Data",onOpen:d,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:x,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Menu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:n.name,onChange:f})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"url",children:["Menu url ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"url",name:"url",placeholder:"access-management",value:n.url,onChange:f})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function B({isLoadingMenuMan:c,menus:d,setMenuId:a,setIsUpdateModalOpen:t,setIsDeleteModalOpen:i,type:n}){return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),n==="grid"?e.jsx("div",{className:"menu-man-grid",children:d.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(O,{to:`/${s.url}`,className:"item-url",children:s.url}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{t(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{i(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))}):e.jsxs("div",{className:"menu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Url"}),e.jsx("div",{className:"head-col",children:"Action"})]}),d.map((s,r)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:r+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx(O,{to:`/${s.url}`,className:"body-col",children:s.url}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{t(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{i(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))]})]})}function J(){M.defaults.withCredentials=!0;const[c,d]=l.useState("grid"),[a,t]=l.useState(!1),[i,n]=l.useState(!1),[s,r]=l.useState(!1),[o,u]=l.useState(null),{menus:f,fetchDashboardData:x,isLoading:N}=k(),p=l.useCallback(h=>{d(h)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"menu-man",children:[e.jsx(V,{className:"menu-man",title:"Menu Management — Menus",activeDisplay:c,handleDisplayChange:p,setIsCreateModalOpen:t}),c==="grid"?e.jsx(B,{isLoadingMenuMan:N,menus:f,setMenuId:u,setIsUpdateModalOpen:n,setIsDeleteModalOpen:r,type:"grid"}):e.jsx(B,{isLoadingMenuMan:N,menus:f,setMenuId:u,setIsUpdateModalOpen:n,setIsDeleteModalOpen:r,type:"list"}),e.jsx(L,{type:"create",onOpen:a,onClose:()=>t(!1),refreshData:x}),e.jsx(L,{type:"update",onOpen:i,onClose:()=>n(!1),refreshData:x,menuId:o}),e.jsx(L,{type:"delete",onOpen:s,onClose:()=>r(!1),refreshData:x,menuId:o})]})})}function P({type:c,onOpen:d,onClose:a,refreshData:t,submenuId:i}){M.defaults.withCredentials=!0;const[n,s]=l.useState(!1),[r,o]=l.useState(""),[u,f]=l.useState(!1),[x,N]=l.useState(""),p=l.useRef(null),{toastMessage:h,toastPromise:b,menus:C}=k(),{token:D}=E(),_=l.useCallback(j=>{p.current&&!p.current.contains(j.target)&&s(!1)},[p]);l.useEffect(()=>(n?document.addEventListener("mousedown",_):document.removeEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}),[n]),l.useEffect(()=>{d&&c==="create"?(N(""),o(""),f(!1)):d&&c==="update"&&M.get(`${g.submenusId}?id=${i}`,{headers:{Authorization:`Bearer ${D}`}}).then(j=>{N(j.data.data.name),o(j.data.data.menu_id),f(j.data.data.default)}).catch(j=>{console.error("Error fetching submenu data:",j)})},[d,c,i,D,g.submenusId]);const S=l.useCallback(j=>{j.preventDefault();const m={menuID:r,name:x,defaults:u};c==="create"?R.validate(m,{abortEarly:!1}).then(()=>{const v=M.post(g.submenus,m,{headers:{Authorization:`Bearer ${D}`}});b(v,{pending:"Adding submenu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),v.catch(y=>{console.error("Error adding submenu data:",y)})}).catch(v=>{v.inner.forEach(y=>{h("error",y.message)})}):R.validate(m,{abortEarly:!1}).then(()=>{const v=M.put(`${g.submenus}?id=${i}`,m,{headers:{Authorization:`Bearer ${D}`}});b(v,{pending:"Updating submenu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),v.catch(y=>{console.error("Error updating submenu data:",y)})}).catch(v=>{v.inner.forEach(y=>{h("error",y.message)})})},[R,x,r,u,a,t,h,b,D,i,g.submenus]),$=l.useCallback(j=>{j.preventDefault();const m=M.delete(`${g.submenus}?id=${i}`,{headers:{Authorization:`Bearer ${D}`}});b(m,{pending:"deleting submenu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),m.catch(v=>{console.error("Error deleting submenu data:",v)})},[D,i,a,t,g.submenus,b]);return e.jsx(e.Fragment,{children:c==="delete"?e.jsx(A,{onClose:a,onOpen:d,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:$,children:"delete"})]})}):e.jsx(A,{titleModal:c==="create"?"Insert Submenu Data":"Update Submenu Data",onOpen:d,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:S,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu Parent ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>s(!0),children:[e.jsx("div",{className:"text",children:r===""?"Select Menu Parent":C.filter(j=>j.menu_id===r).map(j=>j.name)}),e.jsx("span",{className:`material-symbols-outlined ${n?"default-closed":""}`,children:"south_east"})]}),n&&e.jsx("div",{className:"select-list",ref:p,children:C.filter(j=>j.menu_id!==r).map(j=>e.jsx("div",{className:"select-list-item",onClick:()=>{o(j.menu_id),s(!1)},children:e.jsx("div",{className:"name",children:j.name})},j.menu_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Submenu Name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Analytics XX",value:x,onChange:j=>N(j.target.value)})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Default ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-default",onClick:()=>f(!u),children:[e.jsx("span",{class:"material-symbols-outlined",children:u?"task_alt":"circle"}),e.jsx("div",{className:"text",children:u?"True":"Null"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function U({isLoadingSubmenuMan:c,submenus:d,setSubmenuId:a,setIsUpdateModalOpen:t,setIsDeleteModalOpen:i,type:n}){return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),n==="grid"?e.jsx("div",{className:"submenu-man-grid",children:d.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(O,{className:"item-menu",to:`/${s.menus.url}`,children:s.menus.url}),e.jsxs("div",{className:"item-action",children:[s.default===!0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"item-action-default",children:[e.jsx("span",{className:"material-symbols-outlined item-action-default-icon",children:"settings"}),e.jsx("span",{className:"item-action-default-text",children:"Default"})]})}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{t(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{i(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))}):e.jsxs("div",{className:"submenu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Default"}),e.jsx("div",{className:"head-col",children:"Action"})]}),d.map((s,r)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:r+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx("div",{className:"body-col",children:s.menus.name}),e.jsx("div",{className:"body-col",children:s.default===!0?e.jsx("span",{className:"default",children:"Default"}):e.jsx("span",{className:"nope",children:"-"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{t(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{i(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))]})]})}function K(){M.defaults.withCredentials=!0;const[c,d]=l.useState("grid"),[a,t]=l.useState(!1),[i,n]=l.useState(!1),[s,r]=l.useState(!1),[o,u]=l.useState(null),{submenus:f,fetchDashboardData:x,isLoading:N}=k(),p=l.useCallback(h=>{d(h)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"submenu-man",children:[e.jsx(V,{className:"submenu-man",title:"Menu Management — Submenus",activeDisplay:c,handleDisplayChange:p,setIsCreateModalOpen:t}),c==="grid"?e.jsx(U,{isLoadingSubmenuMan:N,submenus:f,setSubmenuId:u,setIsUpdateModalOpen:n,setIsDeleteModalOpen:r,type:"grid"}):e.jsx(U,{isLoadingSubmenuMan:N,submenus:f,setSubmenuId:u,setIsUpdateModalOpen:n,setIsDeleteModalOpen:r,type:"list"}),e.jsx(P,{type:"create",onOpen:a,onClose:()=>t(!1),refreshData:x}),e.jsx(P,{type:"update",onOpen:i,onClose:()=>n(!1),refreshData:x,submenuId:o}),e.jsx(P,{type:"delete",onOpen:s,onClose:()=>r(!1),refreshData:x,submenuId:o})]})})}const q=[{role_id:1,role:"admin"},{role_id:2,role:"customer"}];function T({type:c,onOpen:d,onClose:a,refreshData:t,accessId:i}){M.defaults.withCredentials=!0;const[n,s]=l.useState(!1),[r,o]=l.useState(!1),[u,f]=l.useState(""),[x,N]=l.useState(""),p=l.useRef(null),h=l.useRef(null),{toastMessage:b,toastPromise:C,menus:D}=k(),{token:_}=E(),S=l.useCallback(m=>{p.current&&!p.current.contains(m.target)?s(!1):h.current&&!h.current.contains(m.target)&&o(!1)},[p,h]);l.useEffect(()=>(n||r?document.addEventListener("mousedown",S):document.removeEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}),[n,r,S]),l.useEffect(()=>{d&&c==="create"&&(N(""),f(""))},[d,c]);const $=l.useCallback(m=>{m.preventDefault();const v={menuID:u,role:x};z.validate(v,{abortEarly:!1}).then(()=>{const y=M.post(g.accessManagement,v,{headers:{Authorization:`Bearer ${_}`}});C(y,{pending:"Adding access data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),y.catch(w=>{console.error("Error adding access data:",w)})}).catch(y=>{y.inner.forEach(w=>{b("error",w.message)})})},[z,x,u,a,t,_,i,b,C,g.accessManagement]),j=l.useCallback(m=>{m.preventDefault();const v=M.delete(`${g.accessManagement}?id=${i}`,{headers:{Authorization:`Bearer ${_}`}});C(v,{pending:"deleting access data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),t()}),v.catch(y=>{console.error("Error deleting access data:",y)})},[_,C,i,a,t,g.accessManagement]);return e.jsx(e.Fragment,{children:c==="delete"?e.jsx(A,{onClose:a,onOpen:d,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:j,children:"delete"})]})}):e.jsx(A,{titleModal:"Insert Access Data",onOpen:d,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:$,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Role ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>o(!0),children:[e.jsx("div",{className:"text",children:x===""?"Choose Role":q.filter(m=>m.role===x).map(m=>m.role)}),e.jsx("span",{className:`material-symbols-outlined ${r?"default-closed":""}`,children:"south_east"})]}),r&&e.jsx("div",{className:"select-list no-more",ref:h,children:q.filter(m=>m.role!==x).map(m=>e.jsx("div",{className:"select-list-item",onClick:()=>{N(m.role),o(!1)},children:e.jsx("div",{className:"name",children:m.role})},m.role_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>s(!0),children:[e.jsx("div",{className:"text",children:u===""?"Choose Menu":D.filter(m=>m.menu_id===u).map(m=>m.name)}),e.jsx("span",{className:`material-symbols-outlined ${n?"default-closed":""}`,children:"south_east"})]}),n&&e.jsx("div",{className:"select-list",ref:p,children:D.filter(m=>m.menu_id!==u).map(m=>e.jsx("div",{className:"select-list-item",onClick:()=>{f(m.menu_id),s(!1)},children:e.jsx("div",{className:"name",children:m.name})},m.menu_id))})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function Y({isLoadingAccessMan:c,accessMenus:d,setAccessId:a,setIsDeleteModalOpen:t,type:i,menus:n,activeRole:s,handleActiveRole:r}){return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),e.jsxs("div",{className:"access-man-wrapper",children:[e.jsx("div",{className:"access-man-roles",children:q.map(o=>e.jsx("div",{className:`role ${s===o.role?"active":""}`,onClick:()=>r(o.role),children:o.role},o.role_id))}),i==="grid"?e.jsx("div",{className:"access-man-grid",children:n.map(o=>{const u=d.find(x=>x.menu_id===o.menu_id&&x.role===s),f=!!u;return e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:o.name}),e.jsx("span",{className:"material-symbols-outlined item-check",children:f?"task_alt":"circle"}),e.jsx("div",{className:"item-action",children:f&&e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{t(!0),a(u.access_id)},children:"delete"})})]},o.menu_id)})}):e.jsxs("div",{className:"access-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Access"}),e.jsx("div",{className:"head-col",children:"Action"})]}),n.map((o,u)=>{const f=d.find(N=>N.menu_id===o.menu_id&&N.role===s),x=!!f;return e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:u+1}),e.jsx("div",{className:"body-col",children:o.name}),e.jsx("div",{className:"body-col material-symbols-outlined",children:x?"task_alt":"circle"}),e.jsx("div",{className:"body-col",children:x&&e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{t(!0),a(f.access_id)},children:"delete"})})]},o.menu_id)})]})]})]})}function Q(){M.defaults.withCredentials=!0;const[c,d]=l.useState("list"),[a,t]=l.useState(!1),[i,n]=l.useState(!1),[s,r]=l.useState(null),[o,u]=l.useState("admin"),{accessMenus:f,fetchDashboardData:x,isLoading:N,menus:p}=k(),h=l.useCallback(C=>{d(C)},[]),b=l.useCallback(C=>{u(C)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"access-man",children:[e.jsx(V,{className:"access-man",title:"Menu Management — Access Menu",activeDisplay:c,handleDisplayChange:h,setIsCreateModalOpen:t}),c==="grid"?e.jsx(Y,{isLoadingAccessMan:N,accessMenus:f,setAccessId:r,setIsDeleteModalOpen:n,type:"grid",menus:p,activeRole:o,handleActiveRole:b}):e.jsx(Y,{isLoadingAccessMan:N,accessMenus:f,setAccessId:r,setIsDeleteModalOpen:n,type:"list",menus:p,activeRole:o,handleActiveRole:b}),e.jsx(T,{type:"create",onOpen:a,onClose:()=>t(!1),refreshData:x}),e.jsx(T,{type:"delete",onOpen:i,onClose:()=>n(!1),refreshData:x,accessId:s})]})})}function ce(){const[c,d]=l.useState(!1),{submenuPage:a,accessMenus:t}=k(),{decoded:i,token:n}=E();return l.useEffect(()=>{t.filter(r=>r.role===(i==null?void 0:i.role)&&r.menu_id==="b37d4e96-87b0-4480-805e-562ccd798338").length>0?d(!0):d(!1)},[t,i]),n?e.jsx(e.Fragment,{children:c?e.jsxs(H,{children:[a==="access"&&e.jsx(Q,{}),a==="menu"&&e.jsx(J,{}),a==="submenu"&&e.jsx(K,{})]}):e.jsx(G,{})}):e.jsx(X,{})}export{ce as default};
