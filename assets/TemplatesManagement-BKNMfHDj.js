import{b as x,r as i,i as A,k as _,a as u,j as e}from"./index-Cj64leMr.js";import{M as v,H as M}from"./Modal-CkfEJLJ8.js";import{t as N,T as C}from"./ValidationSchema-vCEiEGay.js";import{L as F}from"./LayoutDashboard-CMj4TGdq.js";import{Error403 as P}from"./Error-nhEFgRCn.js";import"./AiBuilderSupport-Bi3f_xYw.js";import"./black-logo-KPU1N9jl.js";function S({type:n,onOpen:c,onClose:a,refreshData:r,pageId:o}){x.defaults.withCredentials=!0;const[d,s]=i.useState({type:"",icon:"",name_class:""}),{toastMessage:h,toastPromise:g}=A(),{token:p}=_();i.useEffect(()=>{c&&n==="create"?s({type:"",icon:"",name_class:""}):c&&n==="update"&&x.get(`${u.pagesAiId}?id=${o}`).then(m=>{s(m.data.data)}).catch(m=>{console.error("Error fetching page data:",m)})},[c,n,o,u]);const y=m=>{const{name:t,value:l}=m.target;s({...d,[t]:l})},j=i.useCallback(m=>{m.preventDefault(),n==="create"?N.validate(d,{abortEarly:!1}).then(()=>{const t=x.post(u.pagesAi,d,{headers:{Authorization:`Bearer ${p}`}});g(t,{pending:"Adding page data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),r()}),t.catch(l=>{console.error("Error adding page data:",l)})}).catch(t=>{t.inner.forEach(l=>{h("error",l.message)})}):N.validate(d,{abortEarly:!1}).then(()=>{const t=x.put(`${u.pagesAi}?id=${o}`,d,{headers:{Authorization:`Bearer ${p}`}});g(t,{pending:"Updating page data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),r()}),t.catch(l=>{console.error("Error updating page data:",l)})}).catch(t=>{t.inner.forEach(l=>{h("error",l.message)})})},[N,d,a,r,h,g,o,p,u]),b=i.useCallback(m=>{m.preventDefault();const t=x.delete(`${u.pagesAi}?id=${o}`,{headers:{Authorization:`Bearer ${p}`}});g(t,{pending:"deleting page data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),r()}),t.catch(l=>{console.error("Error deleting page data:",l)})},[o,p,a,r]);return e.jsx(e.Fragment,{children:n==="delete"?e.jsx(v,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx(v,{titleModal:n==="create"?"Insert Page Data":"Update Page Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"type",children:["Page name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"type",name:"type",placeholder:"Home Page",value:d.type,onChange:y})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"icon",children:["Page icon ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"icon",name:"icon",placeholder:"home (google material icon)",value:d.icon,onChange:y})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name_class",children:["Page class ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name_class",name:"name_class",placeholder:"home-page",value:d.name_class,onChange:y})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function k({isLoadingTempPages:n,pages:c,setPageId:a,setIsUpdateModalOpen:r,setIsDeleteModalOpen:o,type:d}){return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),d==="grid"?e.jsx("div",{className:"temp-pages-grid",children:c.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("span",{className:"material-symbols-rounded item-icon",children:s.icon}),e.jsx("div",{className:"item-name",children:s.type}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{r(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))}):e.jsxs("div",{className:"temp-pages-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Icon"}),e.jsx("div",{className:"head-col",children:"Google Material Icon"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((s,h)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:h+1}),e.jsx("span",{className:"material-symbols-rounded body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.icon}),e.jsx("div",{className:"body-col",children:s.type}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{r(!0),a(s.type_template_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.type_template_id)},children:"delete"})]})]},s.type_template_id))]})]})}function w(){x.defaults.withCredentials=!0;const[n,c]=i.useState([]),[a,r]=i.useState(!1),[o,d]=i.useState("grid"),[s,h]=i.useState(!1),[g,p]=i.useState(!1),[y,j]=i.useState(!1),[b,m]=i.useState(null),t=i.useCallback(f=>{d(f)},[]),l=i.useCallback(async()=>{r(!0);try{const f=await x.get(u.pagesAi);c(f.data.data),r(!1)}catch(f){console.error(f),r(!1)}finally{r(!1)}},[u]);return i.useEffect(()=>{l()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-pages",children:[e.jsx(M,{className:"temp-pages",title:"Template Management — Pages",activeDisplay:o,handleDisplayChange:t,setIsCreateModalOpen:h}),o==="grid"?e.jsx(k,{isLoadingTempPages:a,pages:n,setPageId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(k,{isLoadingTempPages:a,pages:n,setPageId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"list"}),e.jsx(S,{type:"create",onOpen:s,onClose:()=>h(!1),refreshData:l}),e.jsx(S,{type:"update",onOpen:g,onClose:()=>p(!1),refreshData:l,pageId:b}),e.jsx(S,{type:"delete",onOpen:y,onClose:()=>j(!1),refreshData:l,pageId:b})]})})}function D({type:n,onOpen:c,onClose:a,refreshData:r,sectionId:o}){x.defaults.withCredentials=!0;const[d,s]=i.useState({name:""}),{toastMessage:h,toastPromise:g}=A(),{token:p}=_();i.useEffect(()=>{c&&n==="create"?s({name:""}):c&&n==="update"&&x.get(`${u.elementsAiId}?id=${o}`).then(m=>{s(m.data.data[0])}).catch(m=>{console.error("Error fetching section data:",m)})},[c,n,o,u]);const y=m=>{const{name:t,value:l}=m.target;s({...d,[t]:l})},j=i.useCallback(m=>{m.preventDefault(),n==="create"?C.validate(d,{abortEarly:!1}).then(()=>{const t=x.post(u.elementsAi,d,{headers:{Authorization:`Bearer ${p}`}});g(t,{pending:"Adding section data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),r()}),t.catch(l=>{console.error("Error adding section data:",l)})}).catch(t=>{t.inner.forEach(l=>{h("error",l.message)})}):C.validate(d,{abortEarly:!1}).then(()=>{const t=x.put(`${u.elementsAi}?id=${o}`,d,{headers:{Authorization:`Bearer ${p}`}});g(t,{pending:"Updating section data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),r()}),t.catch(l=>{console.error("Error updating section data:",l)})}).catch(t=>{t.inner.forEach(l=>{h("error",l.message)})})},[C,d,a,r,h,g,o,p,u]),b=i.useCallback(m=>{m.preventDefault();const t=x.delete(`${u.elementsAi}?id=${o}`,{headers:{Authorization:`Bearer ${p}`}});g(t,{pending:"deleting section data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),r()}),t.catch(l=>{console.error("Error deleting section data:",l)})},[o,p,a,r]);return e.jsx(e.Fragment,{children:n==="delete"?e.jsx(v,{onClose:a,onOpen:c,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx(v,{titleModal:n==="create"?"Insert Section Data":"Update Section Data",onOpen:c,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:j,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Section name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Intro Section",value:d.name,onChange:y})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}function E({isLoadingTempSections:n,sections:c,setSectionId:a,setIsUpdateModalOpen:r,setIsDeleteModalOpen:o,type:d}){return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"loader-pages",children:e.jsx("div",{className:"loader-pages-item"})}),d==="grid"?e.jsx("div",{className:"temp-sections-grid",children:c.map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{r(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))}):e.jsxs("div",{className:"temp-sections-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),c.map((s,h)=>e.jsxs("div",{className:"body",children:[e.jsx("dic",{className:"body-col",children:h+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{r(!0),a(s.section_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.section_id)},children:"delete"})]})]},s.section_id))]})]})}function $(){x.defaults.withCredentials=!0;const[n,c]=i.useState([]),[a,r]=i.useState(!1),[o,d]=i.useState("grid"),[s,h]=i.useState(!1),[g,p]=i.useState(!1),[y,j]=i.useState(!1),[b,m]=i.useState(null),t=i.useCallback(f=>{d(f)},[]),l=i.useCallback(async()=>{r(!0);try{const f=await x.get(u.elementsAi);c(f.data.data),r(!1)}catch(f){console.error(f),r(!1)}finally{r(!1)}},[u]);return i.useEffect(()=>{l()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"temp-sections",children:[e.jsx(M,{className:"temp-sections",title:"Template Management — Sections",activeDisplay:o,handleDisplayChange:t,setIsCreateModalOpen:h}),o==="grid"?e.jsx(E,{isLoadingTempSections:a,sections:n,setSectionId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"grid"}):e.jsx(E,{isLoadingTempSections:a,sections:n,setSectionId:m,setIsUpdateModalOpen:p,setIsDeleteModalOpen:j,type:"list"}),e.jsx(D,{type:"create",onOpen:s,onClose:()=>h(!1),refreshData:l}),e.jsx(D,{type:"update",onOpen:g,onClose:()=>p(!1),refreshData:l,sectionId:b}),e.jsx(D,{type:"delete",onOpen:y,onClose:()=>j(!1),refreshData:l,sectionId:b})]})})}function T(){return e.jsx(e.Fragment,{children:e.jsx("div",{children:"Colors"})})}function q(){return e.jsx(e.Fragment,{children:e.jsx("div",{children:"Fonts"})})}function V(){const{submenuPage:n}=A(),{decoded:c}=_();return e.jsx(e.Fragment,{children:(c==null?void 0:c.role)!=="admin"?e.jsx(P,{}):e.jsxs(F,{children:[n==="overview"&&e.jsx("span",{children:"test"}),n==="pages"&&e.jsx(w,{}),n==="sections"&&e.jsx($,{}),n==="colors"&&e.jsx(T,{}),n==="fonts"&&e.jsx(q,{})]})})}export{V as default};
