import{P as c,a as D,r as t,h as L,e as _,j as e,i as q,k as T,L as B,u as Q}from"./index-aySjYrsU.js";import{L as W}from"./LayoutDashboard-BAZNBLcU.js";import{H as z}from"./SupportDashboard-dL8Cybnh.js";import{M as G,S as J,A as Z,R as K}from"./ValidationSchema-D3YOnutq.js";import{M as $}from"./Profile-CMgs2MYk.js";import"./AiBuilderSupport-CPodDVxf.js";import"./black-logo-KPU1N9jl.js";import"./AuthSupport-CdrhMnVD.js";function O({type:l,onOpen:i,onClose:a,refreshData:d,menuId:o}){D.defaults.withCredentials=!0;const[r,x]=t.useState({name:"",url:""}),[s,n]=t.useState(!0),{toastMessage:h,toastPromise:u,token:m}=L(),b=t.useRef(!1),f=t.useRef(!1);t.useEffect(()=>{i&&l==="create"?(x({name:"",url:""}),n(!0)):i&&l==="update"&&D.get(`${_.menusId}?id=${o}`).then(M=>{x(M.data.data[0]),n(M.data.data[0].is_develope)}).catch(M=>{console.error("Error fetching menu data:",M)})},[i,l,o]);const p=M=>{const{name:g,value:v}=M.target;x({...r,[g]:v})},N=t.useCallback(M=>{if(M.preventDefault(),l==="create"){const g={name:r.name,url:r.url,isDevelope:s};G.validate(g,{abortEarly:!1}).then(()=>{const v=D.post(_.menus,g,{headers:{Authorization:`Bearer ${m}`}});v.then(C=>{b.current=C.data.success}),u(v,{pending:"Adding menu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{b.current===!0&&(a(),d())}),v.catch(C=>{console.error("Error adding menu data:",C)})}).catch(v=>{v.inner.forEach(C=>{h("error",C.message)})})}else{const g={name:r.name,url:r.url,isDevelope:s};G.validate(g,{abortEarly:!1}).then(()=>{const v=D.put(`${_.menus}?id=${o}`,g,{headers:{Authorization:`Bearer ${m}`}});v.then(C=>{f.current=C.data.success}),u(v,{pending:"Updating menu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{f.current===!0&&(a(),d())}),v.catch(C=>{console.error("Error updating menu data:",C)})}).catch(v=>{v.inner.forEach(C=>{h("error",C.message)})})}},[r,s,a,d,h,u,o,m,l]),k=t.useCallback(M=>{M.preventDefault();const g=D.delete(`${_.menus}?id=${o}`,{headers:{Authorization:`Bearer ${m}`}});u(g,{pending:"deleting menu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),g.catch(v=>{console.error("Error deleting menu data:",v)})},[o,m,a,d,u]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx($,{onClose:a,onOpen:i,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:k,children:"delete"})]})}):e.jsx($,{titleModal:l==="create"?"Insert Menu Data":"Update Menu Data",onOpen:i,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:N,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Menu name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Access Management",value:r.name,onChange:p})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"url",children:["Menu url ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"url",name:"url",placeholder:"access-management",value:r.url,onChange:p})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Is Develope ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-option",onClick:()=>n(!s),children:[e.jsx("span",{className:"material-symbols-outlined",children:s?"circle":"task_alt"}),e.jsx("div",{className:"text",children:s?"Progress":"Done"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}O.propTypes={type:c.string,onOpen:c.bool,onClose:c.func,refreshData:c.func,menuId:c.string};function U({isLoadingDashboard:l,menus:i,setMenuId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:r}){const{search:x}=q();return e.jsxs(e.Fragment,{children:[l&&e.jsx(T,{}),r==="grid"?e.jsx("div",{className:"menu-man-grid",children:i.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.url.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(B,{to:`/${s.url}`,className:"item-url",children:s.url}),e.jsxs("div",{className:"item-action",children:[s.is_develope===!0?e.jsxs("span",{className:"item-action-progress",children:[e.jsx("span",{className:"material-symbols-outlined item-action-icon",children:"sync"}),e.jsx("div",{className:"text",children:"Progress"})]}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))}):e.jsxs("div",{className:"menu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Url"}),e.jsx("div",{className:"head-col",children:"Develope"}),e.jsx("div",{className:"head-col",children:"Action"})]}),i.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.url.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx(B,{to:`/${s.url}`,className:"body-col",children:s.url}),e.jsx("div",{className:"body-col",children:s.is_develope===!0?e.jsx("span",{className:"progress",children:"Progress"}):e.jsx("span",{className:"done",children:"Done"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.menu_id)},children:"delete"})]})]},s.menu_id))]})]})}function ee(){D.defaults.withCredentials=!0;const[l,i]=t.useState("grid"),[a,d]=t.useState(!1),[o,r]=t.useState(!1),[x,s]=t.useState(!1),[n,h]=t.useState(null),{menus:u,fetchDashboardData:m,isLoadingDashboard:b}=L(),f=t.useCallback(p=>{i(p)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"menu-man",children:[e.jsx(z,{className:"menu-man",title:"Menu Management â€” Menus",activeDisplay:l,handleDisplayChange:f,setIsCreateModalOpen:d}),l==="grid"?e.jsx(U,{isLoadingDashboard:b,menus:u,setMenuId:h,setIsUpdateModalOpen:r,setIsDeleteModalOpen:s,type:"grid"}):e.jsx(U,{isLoadingDashboard:b,menus:u,setMenuId:h,setIsUpdateModalOpen:r,setIsDeleteModalOpen:s,type:"list"}),e.jsx(O,{type:"create",onOpen:a,onClose:()=>d(!1),refreshData:m}),e.jsx(O,{type:"update",onOpen:o,onClose:()=>r(!1),refreshData:m,menuId:n}),e.jsx(O,{type:"delete",onOpen:x,onClose:()=>s(!1),refreshData:m,menuId:n})]})})}U.propTypes={type:c.string,menus:c.array,setMenuId:c.func,isLoadingDashboard:c.bool,setIsUpdateModalOpen:c.func,setIsDeleteModalOpen:c.func};function P({type:l,onOpen:i,onClose:a,refreshData:d,submenuId:o}){D.defaults.withCredentials=!0;const[r,x]=t.useState(!1),[s,n]=t.useState(""),[h,u]=t.useState(!1),[m,b]=t.useState(!0),[f,p]=t.useState(""),N=t.useRef(null),k=t.useRef(!1),M=t.useRef(!1),{toastMessage:g,toastPromise:v,menus:C,token:E}=L(),F=t.useCallback(j=>{N.current&&!N.current.contains(j.target)&&x(!1)},[N]);t.useEffect(()=>(r?document.addEventListener("mousedown",F):document.removeEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}),[r,F]),t.useEffect(()=>{i&&l==="create"?(p(""),n(""),u(!1),b(!0)):i&&l==="update"&&D.get(`${_.submenusId}?id=${o}`,{headers:{Authorization:`Bearer ${E}`}}).then(j=>{p(j.data.data.name),n(j.data.data.menu_id),u(j.data.data.default),b(j.data.data.is_develope)}).catch(j=>{console.error("Error fetching submenu data:",j)})},[i,l,o,E]);const y=t.useCallback(j=>{j.preventDefault();const S={menuID:s,name:f,defaults:h,isDevelope:m};l==="create"?J.validate(S,{abortEarly:!1}).then(()=>{const w=D.post(_.submenus,S,{headers:{Authorization:`Bearer ${E}`}});w.then(A=>{k.current=A.data.success}),v(w,{pending:"Adding submenu data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{k.current===!0&&(a(),d())}),w.catch(A=>{console.error("Error adding submenu data:",A)})}).catch(w=>{w.inner.forEach(A=>{g("error",A.message)})}):J.validate(S,{abortEarly:!1}).then(()=>{const w=D.put(`${_.submenus}?id=${o}`,S,{headers:{Authorization:`Bearer ${E}`}});w.then(A=>{M.current=A.data.success}),v(w,{pending:"Updating submenu data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{M.current===!0&&(a(),d())}),w.catch(A=>{console.error("Error updating submenu data:",A)})}).catch(w=>{w.inner.forEach(A=>{g("error",A.message)})})},[l,f,s,h,m,a,d,g,v,E,o]),R=t.useCallback(j=>{j.preventDefault();const S=D.delete(`${_.submenus}?id=${o}`,{headers:{Authorization:`Bearer ${E}`}});v(S,{pending:"deleting submenu data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),S.catch(w=>{console.error("Error deleting submenu data:",w)})},[E,o,a,d,v]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx($,{onClose:a,onOpen:i,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:R,children:"delete"})]})}):e.jsx($,{titleModal:l==="create"?"Insert Submenu Data":"Update Submenu Data",onOpen:i,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:y,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu Parent ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>x(!0),children:[e.jsx("div",{className:"text",children:s===""?"Select Menu Parent":C.filter(j=>j.menu_id===s).map(j=>j.name)}),e.jsx("span",{className:`material-symbols-outlined ${r?"default-closed":""}`,children:"south_east"})]}),r&&e.jsx("div",{className:"select-list",ref:N,children:C.filter(j=>j.menu_id!==s&&j.is_develope===!1).map(j=>e.jsx("div",{className:"select-list-item",onClick:()=>{n(j.menu_id),x(!1)},children:e.jsx("div",{className:"name",children:j.name})},j.menu_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Submenu Name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Analytics XX",value:f,onChange:j=>p(j.target.value)})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Default ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-option",onClick:()=>u(!h),children:[e.jsx("span",{className:"material-symbols-outlined",children:h?"task_alt":"circle"}),e.jsx("div",{className:"text",children:h?"True":"False"})]})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Setting Is Develope ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"check-option",onClick:()=>b(!m),children:[e.jsx("span",{className:"material-symbols-outlined",children:m?"circle":"task_alt"}),e.jsx("div",{className:"text",children:m?"Progress":"Done"})]})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}P.propTypes={type:c.string,onOpen:c.bool,onClose:c.func,refreshData:c.func,submenuId:c.string};function V({isLoadingDashboard:l,submenus:i,setSubmenuId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:r}){const{search:x}=q();return e.jsxs(e.Fragment,{children:[l&&e.jsx(T,{}),r==="grid"?e.jsx("div",{className:"submenu-man-grid",children:i.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.menus.url.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.name}),e.jsx(B,{className:"item-menu",to:`/${s.menus.url}`,children:s.menus.url}),e.jsxs("div",{className:"item-action",children:[s.is_develope===!0?e.jsxs("span",{className:"item-action-progress",children:[e.jsx("span",{className:"material-symbols-outlined item-action-icon",children:"sync"}),e.jsx("div",{className:"text",children:"Progress"})]}):null,s.default===!0?e.jsxs("div",{className:"item-action-default",children:[e.jsx("span",{className:"material-symbols-outlined item-action-icon",children:"settings"}),e.jsx("span",{className:"text",children:"Default"})]}):null,e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))}):e.jsxs("div",{className:"submenu-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Default"}),e.jsx("div",{className:"head-col",children:"Develope"}),e.jsx("div",{className:"head-col",children:"Action"})]}),i.filter(s=>{const n=x.toLowerCase();return s.name.toLowerCase().includes(n)||s.menus.url.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.name}),e.jsx("div",{className:"body-col",children:s.menus.name}),e.jsx("div",{className:"body-col",children:s.default===!0?e.jsx("span",{className:"default",children:"Default"}):e.jsx("span",{className:"nope",children:"-"})}),e.jsx("div",{className:"body-col",children:s.is_develope===!0?e.jsx("span",{className:"progress",children:"Progress"}):e.jsx("span",{className:"done",children:"Done"})}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.sub_menu_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.sub_menu_id)},children:"delete"})]})]},s.sub_menu_id))]})]})}function se(){D.defaults.withCredentials=!0;const[l,i]=t.useState("grid"),[a,d]=t.useState(!1),[o,r]=t.useState(!1),[x,s]=t.useState(!1),[n,h]=t.useState(null),{submenus:u,fetchDashboardData:m,isLoadingDashboard:b}=L(),f=t.useCallback(p=>{i(p)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"submenu-man",children:[e.jsx(z,{className:"submenu-man",title:"Menu Management â€” Submenus",activeDisplay:l,handleDisplayChange:f,setIsCreateModalOpen:d}),l==="grid"?e.jsx(V,{isLoadingDashboard:b,submenus:u,setSubmenuId:h,setIsUpdateModalOpen:r,setIsDeleteModalOpen:s,type:"grid"}):e.jsx(V,{isLoadingDashboard:b,submenus:u,setSubmenuId:h,setIsUpdateModalOpen:r,setIsDeleteModalOpen:s,type:"list"}),e.jsx(P,{type:"create",onOpen:a,onClose:()=>d(!1),refreshData:m}),e.jsx(P,{type:"update",onOpen:o,onClose:()=>r(!1),refreshData:m,submenuId:n}),e.jsx(P,{type:"delete",onOpen:x,onClose:()=>s(!1),refreshData:m,submenuId:n})]})})}V.propTypes={isLoadingDashboard:c.bool,submenus:c.array,setSubmenuId:c.func,setIsUpdateModalOpen:c.func,setIsDeleteModalOpen:c.func,type:c.string};function Y({type:l,onOpen:i,onClose:a,accessId:d,roles:o}){D.defaults.withCredentials=!0;const[r,x]=t.useState(!1),[s,n]=t.useState(!1),[h,u]=t.useState(""),[m,b]=t.useState(""),f=t.useRef(null),p=t.useRef(null),{toastMessage:N,toastPromise:k,menus:M,token:g,fetchDashboardData:v}=L(),C=t.useCallback(y=>{f.current&&!f.current.contains(y.target)?x(!1):p.current&&!p.current.contains(y.target)&&n(!1)},[f,p]);t.useEffect(()=>(r||s?document.addEventListener("mousedown",C):document.removeEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}),[r,s,C]),t.useEffect(()=>{i&&l==="create"&&(b(""),u(""))},[i,l]);const E=t.useCallback(y=>{y.preventDefault();const R={menuID:h,roleID:m};Z.validate(R,{abortEarly:!1}).then(()=>{const j=D.post(_.accessManagement,R,{headers:{Authorization:`Bearer ${g}`}});k(j,{pending:"Adding access data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),v()}),j.catch(S=>{console.error("Error adding access data:",S)})}).catch(j=>{j.inner.forEach(S=>{N("error",S.message)})})},[m,h,a,v,g,N,k]),F=t.useCallback(y=>{y.preventDefault();const R=D.delete(`${_.accessManagement}?id=${d}`,{headers:{Authorization:`Bearer ${g}`}});k(R,{pending:"deleting access data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),v()}),R.catch(j=>{console.error("Error deleting access data:",j)})},[g,k,d,a,v]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx($,{onClose:a,onOpen:i,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:F,children:"delete"})]})}):e.jsx($,{titleModal:"Insert Access Data",onOpen:i,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:E,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Role ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>n(!0),children:[e.jsx("div",{className:"text",children:m===""?"Choose Role":o.filter(y=>y.role_id===m).map(y=>y.role_name)}),e.jsx("span",{className:`material-symbols-outlined ${s?"default-closed":""}`,children:"south_east"})]}),s&&e.jsx("div",{className:"select-list no-more",ref:p,children:o.filter(y=>y.role_id!==m).map(y=>e.jsx("div",{className:"select-list-item",onClick:()=>{b(y.role_id),n(!1)},children:e.jsx("div",{className:"name",children:y.role_name})},y.role_id))})]}),e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("div",{className:"label",children:["Menu ",e.jsx("span",{children:"(Required)"})]}),e.jsxs("div",{className:"select-default",onClick:()=>x(!0),children:[e.jsx("div",{className:"text",children:h===""?"Choose Menu":M.filter(y=>y.menu_id===h).map(y=>y.name)}),e.jsx("span",{className:`material-symbols-outlined ${r?"default-closed":""}`,children:"south_east"})]}),r&&e.jsx("div",{className:"select-list",ref:f,children:M.filter(y=>y.menu_id!==h).map(y=>e.jsx("div",{className:"select-list-item",onClick:()=>{u(y.menu_id),x(!1)},children:e.jsx("div",{className:"name",children:y.name})},y.menu_id))})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}Y.propTypes={type:c.string,onOpen:c.bool,onClose:c.func,refreshData:c.func,accessId:c.string,roles:c.array};function H({accessMenus:l,setAccessId:i,setIsDeleteModalOpen:a,type:d,menus:o,activeRole:r,handleActiveRole:x,roles:s,isLoadingDashboard:n}){const{search:h}=q();return e.jsxs(e.Fragment,{children:[n&&e.jsx(T,{}),e.jsxs("div",{className:"access-man-wrapper",children:[e.jsx("div",{className:"access-man-roles",children:s.length>0?s.filter(u=>{const m=h.toLowerCase();return u.role_name.toLowerCase().includes(m)}).map(u=>e.jsx("div",{className:`role ${r===u.role_id?"active":""}`,onClick:()=>x(u.role_id),children:u.role_name},u.role_id)):null}),d==="grid"?e.jsx("div",{className:"access-man-grid",children:o.filter(u=>u.is_develope===!1).map(u=>{const m=l.find(f=>f.menu_id===u.menu_id&&f.role_id===r),b=!!m;return e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:u.name}),e.jsx("span",{className:"material-symbols-outlined item-check",children:b?"task_alt":"circle"}),e.jsx("div",{className:"item-action",children:b&&e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{a(!0),i(m.access_id)},children:"delete"})})]},u.menu_id)})}):e.jsxs("div",{className:"access-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Menu"}),e.jsx("div",{className:"head-col",children:"Access"}),e.jsx("div",{className:"head-col",children:"Action"})]}),o.filter(u=>u.is_develope===!1).map((u,m)=>{const b=l.find(p=>p.menu_id===u.menu_id&&p.role_id===r),f=!!b;return e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:m+1}),e.jsx("div",{className:"body-col",children:u.name}),e.jsx("div",{className:"body-col material-symbols-outlined",children:f?"task_alt":"circle"}),e.jsx("div",{className:"body-col",children:f&&e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{a(!0),i(b.access_id)},children:"delete"})})]},u.menu_id)})]})]})]})}function ae(){D.defaults.withCredentials=!0;const[l,i]=t.useState("3de65f44-6341-4b4d-8d9f-c8ca3ea80b80"),[a,d]=t.useState([]),[o,r]=t.useState("list"),[x,s]=t.useState(!1),[n,h]=t.useState(!1),[u,m]=t.useState(null),{accessMenus:b,menus:f,token:p,isLoadingDashboard:N,setDashboardLoader:k}=L(),M=t.useCallback(C=>{r(C)},[]),g=t.useCallback(C=>{i(C)},[]),v=t.useCallback(async()=>{k(!0);try{const C=await D.get(_.role,{headers:{Authorization:`Bearer ${p}`}});d(C.data.data)}catch(C){console.error(C)}finally{k(!1)}},[p,k]);return t.useEffect(()=>{v()},[v]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"access-man",children:[e.jsx(z,{className:"access-man",title:"Menu Management â€” Access Menu",activeDisplay:o,handleDisplayChange:M,setIsCreateModalOpen:s}),o==="grid"?e.jsx(H,{roles:a,isLoadingDashboard:N,accessMenus:b,setAccessId:m,setIsDeleteModalOpen:h,type:"grid",menus:f,activeRole:l,handleActiveRole:g}):e.jsx(H,{roles:a,isLoadingDashboard:N,accessMenus:b,setAccessId:m,setIsDeleteModalOpen:h,type:"list",menus:f,activeRole:l,handleActiveRole:g}),e.jsx(Y,{type:"create",onOpen:x,onClose:()=>s(!1),roles:a}),e.jsx(Y,{type:"delete",onOpen:n,onClose:()=>h(!1),accessId:u,roles:a})]})})}H.propTypes={accessMenus:c.array,setAccessId:c.func,setIsDeleteModalOpen:c.func,type:c.string,menus:c.array,activeRole:c.string,handleActiveRole:c.func,roles:c.array,isLoadingDashboard:c.bool};function I({type:l,onOpen:i,onClose:a,refreshData:d,roleId:o}){D.defaults.withCredentials=!0;const[r,x]=t.useState({roleName:""}),{toastMessage:s,toastPromise:n,token:h}=L();t.useEffect(()=>{i&&l==="create"?x({roleName:""}):i&&l==="update"&&D.get(`${_.roleId}?id=${o}`,{headers:{Authorization:`Bearer ${h}`}}).then(f=>{console.log(f.data.data),x({roleName:f.data.data.role_name})}).catch(f=>{console.error("Error fetching role data:",f)})},[i,l,o,h]);const u=f=>{const{name:p,value:N}=f.target;x({...r,[p]:N})},m=t.useCallback(f=>{f.preventDefault(),l==="create"?K.validate(r,{abortEarly:!1}).then(()=>{const p=D.post(_.role,r,{headers:{Authorization:`Bearer ${h}`}});n(p,{pending:"Adding role data on progress, please wait..!",success:"Data has been successfully added!",error:"Failed to add data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),p.catch(N=>{console.error("Error adding role data:",N)})}).catch(p=>{p.inner.forEach(N=>{s("error",N.message)})}):K.validate(r,{abortEarly:!1}).then(()=>{const p=D.put(`${_.role}?id=${o}`,r,{headers:{Authorization:`Bearer ${h}`}});n(p,{pending:"Updating role data on progress, please wait..!",success:"Data has been successfully updated!",error:"Failed to update data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),p.catch(N=>{console.error("Error updating role data:",N)})}).catch(p=>{p.inner.forEach(N=>{s("error",N.message)})})},[l,r,h,a,d,s,n,o]),b=t.useCallback(f=>{f.preventDefault();const p=D.delete(`${_.role}?id=${o}`,{headers:{Authorization:`Bearer ${h}`}});n(p,{pending:"deleting role data on progress, please wait..!",success:"Data has been successfully deleted!",error:"Failed to delete data!"},{autoClose:2500,position:"top-center"},()=>{a(),d()}),p.catch(N=>{console.error("Error deleting role data:",N)})},[o,h,a,d,n]);return e.jsx(e.Fragment,{children:l==="delete"?e.jsx($,{onClose:a,onOpen:i,type:"confirm",titleModal:"Are you sure you want to delete this?",descModal:"Your content will be permanently deleted. This can't be undone.",children:e.jsxs("div",{className:"confirm-dashboard-action",children:[e.jsx("div",{className:"cancel",onClick:a,children:"cancel"}),e.jsx("div",{className:"confirm",onClick:b,children:"delete"})]})}):e.jsx($,{titleModal:l==="create"?"Insert Role Data":"Update Role Data",onOpen:i,onClose:a,children:e.jsxs("form",{className:"modal-dashboard-form",onSubmit:m,children:[e.jsxs("div",{className:"modal-dashboard-form-group",children:[e.jsxs("label",{htmlFor:"roleName",children:["Role name ",e.jsx("span",{children:"(Required)"})]}),e.jsx("input",{type:"text",id:"roleName",name:"roleName",placeholder:"Admin",value:r.roleName,onChange:u})]}),e.jsx("button",{type:"submit",children:"Submit"})]})})})}I.propTypes={type:c.string,onOpen:c.bool,onClose:c.func,refreshData:c.func,roleId:c.string};function X({isLoadingDashboard:l,roles:i,setRoleId:a,setIsUpdateModalOpen:d,setIsDeleteModalOpen:o,type:r}){const{search:x}=q();return e.jsxs(e.Fragment,{children:[l&&e.jsx(T,{}),r==="grid"?e.jsx("div",{className:"role-man-grid",children:i.filter(s=>{const n=x.toLowerCase();return s.role_name.toLowerCase().includes(n)}).map(s=>e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"item-name",children:s.role_name}),e.jsxs("div",{className:"item-action",children:[e.jsx("span",{className:"material-symbols-rounded item-action-edit",onClick:()=>{d(!0),a(s.role_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded item-action-delete",onClick:()=>{o(!0),a(s.role_id)},children:"delete"})]})]},s.role_id))}):e.jsxs("div",{className:"role-man-list",children:[e.jsxs("div",{className:"head",children:[e.jsx("div",{className:"head-col",children:"No"}),e.jsx("div",{className:"head-col",children:"Name"}),e.jsx("div",{className:"head-col",children:"Action"})]}),i.filter(s=>{const n=x.toLowerCase();return s.role_name.toLowerCase().includes(n)}).map((s,n)=>e.jsxs("div",{className:"body",children:[e.jsx("div",{className:"body-col",children:n+1}),e.jsx("div",{className:"body-col",children:s.role_name}),e.jsxs("div",{className:"body-col",children:[e.jsx("span",{className:"material-symbols-rounded edit",onClick:()=>{d(!0),a(s.role_id)},children:"edit_square"}),e.jsx("span",{className:"material-symbols-rounded delete",onClick:()=>{o(!0),a(s.role_id)},children:"delete"})]})]},s.role_id))]})]})}function te(){D.defaults.withCredentials=!0;const[l,i]=t.useState([]),[a,d]=t.useState("grid"),[o,r]=t.useState(!1),[x,s]=t.useState(!1),[n,h]=t.useState(!1),[u,m]=t.useState(null),{fetchDashboardData:b,token:f,isLoadingDashboard:p,setDashboardLoader:N}=L(),k=t.useCallback(g=>{d(g)},[]),M=t.useCallback(async()=>{N(!0);try{const g=await D.get(_.role,{headers:{Authorization:`Bearer ${f}`}});i(g.data.data)}catch(g){console.error("Error fetching roles:",g)}finally{N(!1)}},[f,N]);return t.useEffect(()=>{M()},[M]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"role-man",children:[e.jsx(z,{className:"role-man",title:"Role Management â€” Roles",activeDisplay:a,handleDisplayChange:k,setIsCreateModalOpen:r}),a==="grid"?e.jsx(X,{isLoadingDashboard:p,roles:l,setRoleId:m,setIsUpdateModalOpen:s,setIsDeleteModalOpen:h,type:"grid"}):e.jsx(X,{isLoadingDashboard:p,roles:l,setRoleId:m,setIsUpdateModalOpen:s,setIsDeleteModalOpen:h,type:"list"}),e.jsx(I,{type:"create",onOpen:o,onClose:()=>r(!1),refreshData:b}),e.jsx(I,{type:"update",onOpen:x,onClose:()=>s(!1),refreshData:b,roleId:u}),e.jsx(I,{type:"delete",onOpen:n,onClose:()=>h(!1),refreshData:b,roleId:u})]})})}X.propTypes={isLoadingDashboard:c.bool,roles:c.array,setRoleId:c.func,setIsUpdateModalOpen:c.func,setIsDeleteModalOpen:c.func,type:c.string};function me(){const{submenuPage:l,accessMenus:i,user:a}=L(),d=Q();return t.useEffect(()=>{const o=setTimeout(()=>{(i==null?void 0:i.some(x=>x.role_id===(a==null?void 0:a.role_id)&&x.menu_id==="b37d4e96-87b0-4480-805e-562ccd798338"))===!1&&d("/403",{replace:!0})},1e4);return()=>clearTimeout(o)},[i,a,d]),e.jsx(e.Fragment,{children:e.jsxs(W,{children:[l==="f38556ea-5da9-4eb2-8b8b-dd72b073aba4"&&e.jsx(ae,{}),l==="0349079b-d986-43f3-962b-6510c2c8772a"&&e.jsx(ee,{}),l==="d06c3224-d2c3-4122-89cc-6c8b42043fb3"&&e.jsx(se,{}),l==="2d529de1-847f-493a-b2cf-672eca925729"&&e.jsx(te,{})]})})}export{me as default};
