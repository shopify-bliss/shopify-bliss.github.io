import{a as u,r as i,u as w,b as x,e as c,f as v,t as f,j as t,Q as b}from"./index-mHmsr8ix.js";import{l as C}from"./black-logo-KPU1N9jl.js";import{A as P,a as E}from"./AuthSupport-CF7Z4N7m.js";function R({typeMain:n}){u.defaults.withCredentials=!0;const[o,d]=i.useState(new Array(6).fill("")),p=i.useRef(null),m=i.useRef(null),l=w(),y=x(),g=i.useCallback((r,e)=>{const s=r.target.value.replace(/[^0-9]/g,"");if(s.length<=1){const a=[...o];a[e]=s,d(a),s&&e<5&&document.getElementById(`code-input-${e+1}`).focus()}},[o]),h=r=>{r.preventDefault();const e=r.clipboardData.getData("text").trim();if(/^\d{6}$/.test(e)){const s=e.split("");d(s),document.getElementById("code-input-5").focus()}else f("error","Invalid code format. Please paste 6 digits.")},j=i.useCallback(r=>{if(r.preventDefault(),n==="verify"){const e=o.join("");if(e.length===6){const s=u.post(c.verifyEmail,{code:e,email:y.state.email});v(s,{pending:"Verification in progress, please wait..",success:"Email verified successfully! ðŸŽ‰",error:"Failed to verify email, please try again!"},{position:"top-center"},()=>{p.current===!0&&l("/login")}),s.then(a=>{p.current=a.data.success}).catch(a=>{console.error(a)})}else f("error","Please enter all 6 digits.")}else{const e=o.join("");if(e.length===6){const s=u.post(c.otpPassword,{otp:e});v(s,{pending:"Reset password in progress, please wait..",success:"Reset password verified successfully! ðŸŽ‰",error:"Failed to verify reset password, please try again!"},{position:"top-center"},()=>{m.current===!0&&l("/reset-password",{state:{email:y.state.email}})}),s.then(a=>{m.current=a.data.success}).catch(a=>{console.error(a)})}else f("error","Please enter all 6 digits.")}},[n,o,c.verifyEmail,c.otpPassword,l]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"verify",children:[t.jsx("div",{className:"verify-header",children:t.jsx(P,{type:n,classDiff:"verify"})}),t.jsxs("div",{className:"verify-content",children:[t.jsx(E,{logo:C,type:n,classDiff:"verify"}),t.jsxs("form",{className:"verify-content-core",onSubmit:j,children:[t.jsx("div",{className:"verify-content-core-wrapper",children:o.map((r,e)=>t.jsx("input",{id:`code-input-${e}`,className:"code-number",type:"text",maxLength:"1",value:r,onChange:s=>g(s,e),onKeyDown:s=>{s.key==="Backspace"&&!o[e]&&e>0&&document.getElementById(`code-input-${e-1}`).focus()},onPaste:h,autoComplete:"off"},e))}),t.jsx("button",{className:"verify-content-core-button",children:"Submit Code"})]})]})]}),t.jsx(b,{})]})}export{R as default};
